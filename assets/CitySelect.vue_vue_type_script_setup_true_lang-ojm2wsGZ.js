import{d as C,u as D,s as U,o as z,v as x,w as S,e as l,f as r,g as s,n as I,c as v,B as f,J as h,F as y,m as b,t as g,z as $}from"./index-76dnDRcX.js";import{u as N}from"./userStore-Ie69Ua6O.js";import{t as p}from"./taiwanCities-y_p8gqPp.js";const A={class:"grid grid-cols-3 gap-2"},B={class:"relative"},F=["value"],L=s("div",{class:"absolute flex justify-center items-center top-0 bottom-0 right-0 m-auto p-4 pointer-events-none"},[s("span",{class:"material-icons"},"keyboard_arrow_down")],-1),M={class:"relative"},R=["value"],Y=s("div",{class:"absolute flex justify-center items-center top-0 bottom-0 right-0 m-auto p-4 pointer-events-none"},[s("span",{class:"material-icons"},"keyboard_arrow_down")],-1),Z={class:"relative"},E=["value"],J=s("div",{class:"absolute flex justify-center items-center top-0 bottom-0 right-0 m-auto p-4 pointer-events-none"},[s("span",{class:"material-icons"},"keyboard_arrow_down")],-1),ae=C({__name:"DateSelect",setup(V){const w=D(),k=N(),{birthdate:t,userInfo:i}=U(k);z(()=>{var e;let a=(((e=i.value)==null?void 0:e.birthday)??"").match(/^(\d{4})-(\d{2})-(\d{2})/);a&&(t.value.year=parseInt(a[1]),t.value.month=parseInt(a[2]),t.value.day=parseInt(a[3]),console.log(t.value))});const m=x(()=>{const u=t.value.year,a=t.value.month;return a===2?u%400===0||u%100!==0&&u%4===0?29:28:[4,6,9,11].includes(a)?30:31}),d=()=>{const u=m.value;t.value.day>u&&(t.value.day=u)};return S(()=>t.value.year,d),S(()=>t.value.month,d),(u,a)=>(l(),r("div",null,[s("label",{for:"birthdate",class:I(["form-label",v(w).name==="booking"?"text-neutral":"text-white"])},"生日",2),s("div",A,[s("div",B,[f(s("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>v(t).year=e),class:"form-input",onChange:d},[(l(!0),r(y,null,b(Array.from({length:new Date().getFullYear()-1899},(e,_)=>_+1900).reverse(),e=>(l(),r("option",{key:e,value:e},g(e)+" 年",9,F))),128))],544),[[h,v(t).year]]),L]),s("div",M,[f(s("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>v(t).month=e),class:"form-input",onChange:d},[(l(!0),r(y,null,b(Array.from({length:12},(e,_)=>_+1),e=>(l(),r("option",{key:e,value:e},g(e)+" 月",9,R))),128))],544),[[h,v(t).month]]),Y]),s("div",Z,[f(s("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>v(t).day=e),class:"form-input"},[(l(!0),r(y,null,b(m.value,e=>(l(),r("option",{key:e,value:e},g(e)+" 日",9,E))),128))],512),[[h,v(t).day]]),J])])]))}}),P={class:"flex flex-col space-y-1"},T={class:""},q={class:"grid grid-cols-2 gap-2"},G={class:"relative"},H=["value"],K=s("div",{class:"absolute flex justify-center items-center top-0 bottom-0 right-0 m-auto p-4 pointer-events-none"},[s("span",{class:"material-icons"},"keyboard_arrow_down")],-1),O={class:"relative"},Q=["value"],W=s("div",{class:"absolute flex justify-center items-center top-0 bottom-0 right-0 m-auto p-4 pointer-events-none"},[s("span",{class:"material-icons"},"keyboard_arrow_down")],-1),oe=C({__name:"CitySelect",setup(V){const w=D(),k=N(),{selectedCity:t,selectedDistrict:i,detailedAddress:m,selectedZip:d,userInfo:u}=U(k),a=x(()=>p.map(c=>c.name)),e=x(()=>{const c=p.find(n=>n.name===t.value);return c?c.districts:[]}),_=()=>{i.value=e.value.length>0?e.value[0].name??"":""};S(i,()=>{const c=p.find(n=>n.name===t.value);if(c){const n=c.districts.find(o=>o.name===i.value);n?d.value=Number(n.zip):d.value=NaN}else d.value=NaN});const j=()=>{if(w.fullPath==="/user"){d.value=u.value.address.zipcode;for(const c of p){const n=c.districts.find(o=>o.zip===d.value.toString());if(n){t.value=c.name,i.value=n.name;break}}m.value=u.value.address.detail.replace(t.value,""),m.value=m.value.replace(i.value,"")}else t.value=p[0].name,i.value=p[0].districts[0].name};return z(()=>{j()}),(c,n)=>(l(),r("div",P,[s("label",{for:"district",class:I(["form-label",v(w).name==="booking"?"text-neutral":"text-white"])},"地區",2),s("div",T,[s("div",q,[s("div",G,[f(s("select",{"onUpdate:modelValue":n[0]||(n[0]=o=>$(t)?t.value=o:null),class:"form-select",onChange:_},[(l(!0),r(y,null,b(a.value,o=>(l(),r("option",{key:o,value:o},g(o),9,H))),128))],544),[[h,v(t)]]),K]),s("div",O,[f(s("select",{"onUpdate:modelValue":n[1]||(n[1]=o=>$(i)?i.value=o:null),class:"form-select"},[(l(!0),r(y,null,b(e.value,o=>(l(),r("option",{key:o.zip,value:o.name},g(o.name),9,Q))),128))],512),[[h,v(i)]]),W])])])]))}});export{ae as _,oe as a};
