import{d as y,s as U,e as p,f as b,g as e,t as f,c as s,n as c,B as w,C as g,z as P,F as E,o as I,b as $,p as C,i as S,h as r,k as x}from"./index-D7joAqCD.js";import{u as V}from"./userStore-B-xb6qbS.js";import{_ as B}from"./UserBanner.vue_vue_type_style_index_0_lang-OXHFk-FM.js";import{_ as D,a as N}from"./CitySelect.vue_vue_type_script_setup_true_lang-0cOKxBs8.js";import"./swal-jtAPSmEf.js";import"./taiwanCities-y_p8gqPp.js";const M={class:"flex flex-col gap-6"},q=e("p",{class:"font-500 mb-2 text-neutral-80"},"電子信箱",-1),T={class:"font-bold"},z=e("div",{class:"grow"},[e("p",{class:"font-500 mb-2 text-neutral-80"},"密碼"),e("input",{type:"password",class:"block font-bold",value:"12345678"})],-1),A=e("label",{for:"oldPassword",class:"mb-2 text-neutral-80 font-bold"},"舊密碼",-1),R=e("label",{for:"newPassword",class:"mb-2 text-neutral-80 font-bold"},"新密碼",-1),j=e("label",{for:"checkNewPassword",class:"mb-2 text-neutral-80 font-bold"},"確認新密碼",-1),G=y({__name:"UserAccount",setup(k){const i=V(),{userInfo:o,editUserData:t,newPassword2:u,showEditPassword:d}=U(i),h=i.editUserPass,m=()=>{t.value.userId=o.value._id,t.value.name=o.value.name,t.value.phone=o.value.phone,t.value.birthday=o.value.birthday,t.value.address=o.value.address};return(a,l)=>(p(),b(E,null,[e("div",M,[e("div",null,[q,e("p",T,f(s(o).email),1)]),e("div",{class:c(["flex",{hidden:s(d)}])},[z,e("button",{class:c(["text-primary-100 underline",{hidden:s(d)}]),onClick:l[0]||(l[0]=n=>(d.value=!0,m()))}," 重設 ",2)],2),e("div",{class:c({hidden:!s(d)})},[A,w(e("input",{type:"password",id:"oldPassword",class:"form-input",placeholder:"請輸入舊密碼","onUpdate:modelValue":l[1]||(l[1]=n=>s(t).oldPassword=n)},null,512),[[g,s(t).oldPassword]])],2),e("div",{class:c({hidden:!s(d)})},[R,w(e("input",{type:"password",id:"newPassword",class:"form-input",placeholder:"請輸入新密碼","onUpdate:modelValue":l[2]||(l[2]=n=>s(t).newPassword=n)},null,512),[[g,s(t).newPassword]])],2),e("div",{class:c({hidden:!s(d)})},[j,w(e("input",{type:"password",id:"checkNewPassword",class:"form-input",placeholder:"請再輸入一次新密碼","onUpdate:modelValue":l[3]||(l[3]=n=>P(u)?u.value=n:null)},null,512),[[g,s(u)]])],2)]),e("div",{class:c({hidden:!s(d)})},[e("button",{class:"btn bg-neutral-40 text-neutral-60 w-full lg:w-fit",onClick:l[4]||(l[4]=n=>s(h)())}," 儲存設定 ")],2)],64))}}),H={class:"flex flex-col gap-4"},J={class:"flex flex-col gap-2"},K=e("label",{for:"user-name",class:"font-bold"},"姓名",-1),L={class:"flex flex-col gap-2"},O=e("label",{for:"user-phone",class:"font-bold"},"手機號碼",-1),Q={key:0},W=e("button",{type:"submit",class:"btn bg-neutral-40 text-neutral-60 w-full lg:w-fit mt-3"}," 儲存設定 ",-1),X=[W],Y=y({__name:"UserForm",setup(k){const i=V(),{userInfo:o,editUserData:t,detailedAddress:u,showEditUserInfo:d}=U(i),h=i.editUserInfo;return I(()=>{console.log("userInfo",o.value),t.value.userId=o.value._id,t.value.name=o.value.name,t.value.phone=o.value.phone,t.value.birthday=o.value.birthday,t.value.address=o.value.address,console.log(t.value)}),(m,a)=>{const l=$("VField"),n=$("ErrorMessage"),F=$("VForm");return p(),C(F,{onSubmit:a[3]||(a[3]=v=>s(h)())},{default:S(({errors:v})=>[e("div",H,[e("div",J,[K,r(l,{name:"姓名",type:"text",id:"user-name",rules:"required|min:2",class:c(["p-4 rounded-2 form-input",{"border border-red-600":v.姓名}]),placeholder:"請輸入姓名",modelValue:s(t).name,"onUpdate:modelValue":a[0]||(a[0]=_=>s(t).name=_)},null,8,["class","modelValue"]),r(n,{class:"text-red-600",name:"姓名"})]),e("div",L,[O,r(l,{name:"手機號碼",type:"phone",id:"user-phone",rules:"required|numeric|min:10|mobile",class:c(["p-4 rounded-2 form-input",{"border border-red-600":v.手機號碼}]),placeholder:"請輸入手機號碼",modelValue:s(t).phone,"onUpdate:modelValue":a[1]||(a[1]=_=>s(t).phone=_)},null,8,["class","modelValue"]),r(n,{class:"text-red-600",name:"手機號碼"})]),r(D),r(N),r(l,{name:"詳細地址",type:"text",rules:"required",modelValue:s(u),"onUpdate:modelValue":a[2]||(a[2]=_=>P(u)?u.value=_:null),class:c(["form-input mt-1 block w-full",{"border border-red-600":v.詳細地址}]),placeholder:"請輸入詳細地址"},null,8,["modelValue","class"]),r(n,{class:"text-red-600",name:"詳細地址"})]),s(d)?(p(),b("div",Q,X)):x("",!0)]),_:1})}}}),Z={class:"bg-neutral"},ee={class:"container mx-auto px-4 sm:px-0 pb-10 lg:pb-20"},se={class:"flex flex-col lg:flex-row gap-10"},te={class:"basis-full lg:basis-5/12 bg-white rounded-[20px] p-4 lg:p-10 flex flex-col gap-6 lg:gap-10 h-fit duration-300"},oe=e("h2",{class:"text-5 lg:text-6"},"修改密碼",-1),le={class:"basis-full lg:basis-7/12 bg-white rounded-[20px] p-4 lg:p-10 flex flex-col gap-6 lg:gap-10 h-fit duration-300"},ae=e("h2",{class:"text-5 lg:text-6"},"基本資料",-1),ne={key:1,class:"flex flex-col gap-6"},de=e("p",{class:"font-500 mb-2 text-neutral-80"},"姓名",-1),re={class:"font-bold"},ie=e("p",{class:"font-500 mb-2 text-neutral-80"},"手機號碼",-1),ue={class:"font-bold"},ce=e("p",{class:"font-500 mb-2 text-neutral-80"},"生日",-1),pe={class:"font-bold"},me=e("p",{class:"font-500 mb-2 text-neutral-80"},"地址",-1),_e={class:"font-bold"},fe={key:2},$e=y({__name:"UserInfo",setup(k){const i=V(),{userInfo:o,showEditUserInfo:t}=U(i),u=i.getUser,d=i.checkUser;return I(async()=>{await d(),u()}),(h,m)=>{var a,l;return p(),b("div",Z,[r(B),e("div",ee,[e("div",se,[e("div",te,[oe,r(G)]),e("div",le,[ae,s(t)?(p(),C(Y,{key:0})):x("",!0),s(t)?x("",!0):(p(),b("div",ne,[e("div",null,[de,e("p",re,f(s(o).name),1)]),e("div",null,[ie,e("p",ue,f(s(o).phone),1)]),e("div",null,[ce,e("p",pe,f((a=s(o).birthday)==null?void 0:a.replace(/^(\d{4})-(\d{2})-(\d{2})T.*$/,"$1/$2/$3")),1)]),e("div",null,[me,e("p",_e,f((l=s(o).address)==null?void 0:l.detail),1)])])),s(t)?x("",!0):(p(),b("div",fe,[e("button",{class:"btn btn-secondary border border-primary-100 w-fit",onClick:m[0]||(m[0]=n=>t.value=!0)},"編輯")]))])])])])}}});export{$e as default};
