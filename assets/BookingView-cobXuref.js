import{d as B,s as b,r as N,E as T,z as O,o as z,b as c,c as d,p as f,G as C,e as t,F as $,k as F,u as e,q as U,v as g,h as E,H as j,t as n,f as p,w as k,g as x,l as A,a as R}from"./index-uIhorUpP.js";import{_ as L}from"./RoomInfoMain.vue_vue_type_script_setup_true_lang-hXwq9Xyu.js";import{u as w}from"./orderStore--igTOB9w.js";import{u as q}from"./roomStore-vHMWRCDY.js";import{u as G}from"./dateStore-4g9nDGSi.js";import"./RoomInfoBasic.vue_vue_type_script_setup_true_lang-SM2Cimqj.js";import"./RoomInfoProvide.vue_vue_type_script_setup_true_lang-A0UUszX3.js";import"./swal-MzZ19o4Z.js";const H=t("label",{for:"userAddress"},"地址",-1),I={key:0,class:"grid grid-cols-2 gap-2"},P=t("option",{value:"",selected:""},"請選擇縣市",-1),J=["value"],K=t("option",{value:"",selected:""},"請選擇行政區",-1),Q=["value"],W=B({__name:"AddressForm",setup(D){const m=w(),{selectDistrict:s,addressDetail:_}=b(m),l=N(null),r=async()=>{try{const a=await j.get("/api/abc873693/2804e64324eaaf26515281710e1792df/raw/a1e1fc17d04b47c564bbd9dba0d59a6a325ec7c1/taiwan_districts.json");l.value=a.data,console.log("取得縣市列表",l.value)}catch(i){console.log(i)}},v=T(()=>l.value?l.value.map(i=>i.name):[]),h=T(()=>{if(l.value){const i=l.value.find(a=>a.name===u.value);return i?i.district:[]}else return[]}),u=N("");return O(u,()=>{s.value=""}),z(()=>{r()}),(i,a)=>(c(),d($,null,[H,l.value?(c(),d("div",I,[f(t("select",{"onUpdate:modelValue":a[0]||(a[0]=o=>u.value=o),class:"form-input"},[P,(c(!0),d($,null,F(v.value,o=>(c(),d("option",{key:o,value:o},n(o),9,J))),128))],512),[[C,u.value]]),f(t("select",{"onUpdate:modelValue":a[1]||(a[1]=o=>U(s)?s.value=o:null),class:"form-input"},[K,(c(!0),d($,null,F(h.value,o=>(c(),d("option",{key:o.zip,value:o.zip},n(o.name),9,Q))),128))],512),[[C,e(s)]]),f(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=o=>U(_)?_.value=o:null),placeholder:"請輸入詳細地址",class:"form-input col-span-2"},null,512),[[g,e(_)]])])):E("",!0)],64))}}),X={class:"flex flex-col gap-4"},Y=t("label",{for:"userName"},"姓名",-1),Z=t("label",{for:"userPhone"},"聯絡電話",-1),tt=t("label",{for:"userEmail"},"電子信箱",-1),et=B({__name:"BookingForm",setup(D){const m=w(),{userInfo:s}=b(m);return(_,l)=>(c(),d("div",X,[t("div",null,[Y,f(t("input",{type:"text",class:"form-input","onUpdate:modelValue":l[0]||(l[0]=r=>e(s).name=r)},null,512),[[g,e(s).name]])]),t("div",null,[Z,f(t("input",{type:"tel",class:"form-input","onUpdate:modelValue":l[1]||(l[1]=r=>e(s).phone=r)},null,512),[[g,e(s).phone]])]),t("div",null,[tt,f(t("input",{type:"email",class:"form-input","onUpdate:modelValue":l[2]||(l[2]=r=>e(s).email=r)},null,512),[[g,e(s).email]])]),t("div",null,[p(W)])]))}}),st={key:0,class:"bg-primary-10"},ot={class:"container mx-auto px-4 xl:px-0 py-10 lg:py-30"},lt={class:"lg:flex lg:justify-between gap-18"},at={class:"basis-full lg:basis-7/12 mb-10 lg:mb-0"},nt=t("h2",{class:"text-5 lg:text-7 mb-8 lg:mb-10"},"訂房資訊",-1),it={class:"flex flex-col gap-6 pb-10 mb-10 lg:pb-[47px] lg:mb-[47px] border-b border-neutral-60"},rt={class:"flex items-center"},ct=t("h3",{class:"title-deco ps-4 text-4 mb-2"},"選擇房型",-1),dt={class:"flex items-center"},ut=t("h3",{class:"title-deco ps-4 text-4 mb-2"},"訂房日期",-1),pt={class:"mb-2"},mt={class:"flex items-center"},_t=t("h3",{class:"title-deco ps-4 text-4 mb-2"},"房客人數",-1),ft={class:"pb-10 mb-10 lg:pb-[47px] lg:mb-[47px] border-b border-neutral-60"},vt=t("div",{class:"flex mb-8 lg:mb-10"},[t("h2",{class:"text-5 lg:text-7"},"訂房人資訊"),t("button",{class:"btn-text ms-auto underline"},"套用會員資料")],-1),xt=t("div",{class:"mb-8 lg:mb-10"},[t("h2",{class:"text-5 lg:text-7 text-black"},"房間資訊")],-1),bt={class:"flex flex-col gap-6"},gt={class:"basis-full lg:basis-5/12"},ht={class:"sticky top-[120px]"},yt={class:"bg-white p-6 lg:p-10 rounded-[20px]"},$t={class:"flex flex-col gap-6 lg:gap-10"},kt=["src"],wt={class:"flex flex-col gap-6"},Dt=t("h2",{class:"text-7"},"價格詳情",-1),St={class:"flex flex-col gap-4"},Vt={class:"flex"},Nt=t("span",{class:"material-icons text-4"},"close",-1),Tt={class:"ms-auto"},Ct={class:"flex pb-4 border-b border-neutral-40"},Ft=t("p",null,"住宿折扣",-1),Ut={class:"ms-auto text-primary-100"},Rt={class:"flex"},Bt=t("p",{class:"font-bold"},"總價",-1),zt={class:"font-bold ms-auto"},It={__name:"BookingView",setup(D){const m=q(),{roomDetail:s,roomLayout:_}=b(m),l=m.getFrontRoom,r=G();b(r);const v=w(),{peopleNum:h,bookingDate:u}=b(v),i=v.createOrder,a=v.getStorageData,o=A();return z(()=>{l(),a()}),(S,V)=>{const M=R("font-awesome-icon"),y=R("router-link");return e(s)?(c(),d("div",st,[t("div",ot,[t("div",lt,[t("div",at,[p(y,{to:`/room/${e(o).params.id}`,class:"text-6 lg:text-8 mb-[42px] flex items-center"},{default:k(()=>[p(M,{icon:"fa-solid fa-chevron-left",class:"text-6 lg:text-8 me-2"}),x("確認訂房資訊 ")]),_:1},8,["to"]),t("div",null,[nt,t("div",it,[t("div",rt,[t("div",null,[ct,t("p",null,n(e(s).name),1)])]),t("div",dt,[t("div",null,[ut,t("p",pt,"入住："+n(S.$format.getTradDateFormat(e(u).start)),1),t("p",null,"退房："+n(S.$format.getTradDateFormat(e(u).end)),1)]),p(y,{to:`/room/${e(o).params.id}`,class:"underline ms-auto hover:text-primary-100"},{default:k(()=>[x("編輯")]),_:1},8,["to"])]),t("div",mt,[t("div",null,[_t,t("p",null,n(e(h))+"人",1)]),p(y,{to:`/room/${e(o).params.id}`,class:"underline ms-auto hover:text-primary-100"},{default:k(()=>[x("編輯")]),_:1},8,["to"])])])]),t("div",ft,[vt,p(et)]),t("div",null,[xt,t("div",bt,[p(L,{info:e(s),layout:e(_)},null,8,["info","layout"])])])]),t("div",gt,[t("div",ht,[t("div",yt,[t("div",$t,[t("img",{src:e(s).imageUrl,class:"rounded-2",alt:""},null,8,kt),t("div",wt,[Dt,t("div",St,[t("div",Vt,[t("p",null,[x("NT$ "+n(e(s).price)+" ",1),Nt,x(" "+n()+" 晚",1)]),t("p",Tt,"NT$ "+n(e(s).price),1)]),t("div",Ct,[Ft,t("p",Ut,"NT$ "+n(e(s).discount?"roomDetail.discount":0),1)]),t("div",Rt,[Bt,t("p",zt," NT$ "+n(e(s).price),1)])])]),t("button",{type:"button",class:"btn btn-primary text-bold",onClick:V[0]||(V[0]=Et=>e(i)())},"確認訂房")])])])])])])])):E("",!0)}}};export{It as default};
