import{d as C,s as $,y as U,r as L,w as M,c as _,e as p,j as s,f as e,B as E,J as F,F as k,m as R,z as B,k as j,t as i,b as y,g as o,h as w,n as V,K as O,o as z,i as x,u as q}from"./index-LqCQ5WvY.js";import{u as A,_ as I}from"./dateStore-iIJ2oWcv.js";import{u as D}from"./orderStore-m-LJQZVf.js";import{t as v}from"./taiwanCities-y_p8gqPp.js";import{u as P}from"./roomStore-rlQb0_XG.js";import"./RoomInfoBasic.vue_vue_type_script_setup_true_lang-C4iHT8QM.js";import"./RoomInfoProvide.vue_vue_type_script_setup_true_lang-xaY1f1tc.js";import"./swal-MzZ19o4Z.js";const J=e("label",{for:"userAddress"},"地址",-1),K={key:0,class:"grid grid-cols-2 gap-2"},G={class:"relative"},H=e("option",{value:"",selected:""},"請選擇縣市",-1),Q=["value"],W=e("div",{class:"absolute top-0 bottom-0 right-0 m-auto p-4"},[e("span",{class:"material-icons"},"keyboard_arrow_down")],-1),X={class:"relative"},Y=e("option",{value:"",selected:""},"請選擇行政區",-1),Z=["value"],ee=e("div",{class:"absolute top-0 bottom-0 right-0 m-auto p-4"},[e("span",{class:"material-icons"},"keyboard_arrow_down")],-1),te=C({__name:"AddressForm",setup(S){const f=D(),{selectDistrict:l}=$(f),d=U(()=>v?v.map(a=>a.name):[]),u=U(()=>{if(v){const a=v.find(n=>n.name===m.value);return a?a.districts:[]}else return[]}),m=L("");return M(m,a=>{a&&(l.value="")}),(a,n)=>(_(),p(k,null,[J,s(v)?(_(),p("div",K,[e("div",G,[E(e("select",{name:"縣市",id:"","onUpdate:modelValue":n[0]||(n[0]=t=>m.value=t),class:"form-input"},[H,(_(!0),p(k,null,R(d.value,t=>(_(),p("option",{key:t,value:t},i(t),9,Q))),128))],512),[[F,m.value]]),W]),e("div",null,[e("div",X,[E(e("select",{name:"行政區",id:"","onUpdate:modelValue":n[1]||(n[1]=t=>B(l)?l.value=t:null),class:"form-input"},[Y,(_(!0),p(k,null,R(u.value,t=>(_(),p("option",{key:t.zip,value:t.zip},i(t.name),9,Z))),128))],512),[[F,s(l)]]),ee])])])):j("",!0)],64))}});var se={VITE_URL:"https://freyja-g4ow.onrender.com",BASE_URL:"/side-project-booking/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const oe={class:"flex mb-8 lg:mb-10"},le=e("h2",{class:"text-5 lg:text-7 text-black"},"訂房人資訊",-1),ae={class:"flex flex-col gap-2"},ne=e("label",{for:"userName"},"姓名",-1),re={class:"flex flex-col gap-2"},de=e("label",{for:"userPhone"},"手機號碼",-1),ie={class:"flex flex-col gap-2"},ce=e("label",{for:"userEmail"},"電子信箱",-1),ue={class:"flex flex-col gap-2"},me=C({__name:"BookingForm",setup(S){const{VITE_URL:f}=se,l=D(),{userInfo:d,addressDetail:u}=$(l),m=n=>/^(09)[0-9]{8}$/.test(n)?!0:"請輸入正確電話號碼格式，例如 0987654321",a=()=>{const n=`${f}/api/v1/user`;O.get(n).then(t=>{d.value=t.data.result,u.value=t.data.result.address.detail,console.log("getUser 成功",d.value)}).catch(t=>{console.log("getUser 失敗",t)})};return(n,t)=>{const h=y("VField"),b=y("ErrorMessage"),g=y("VForm");return _(),p(k,null,[e("div",oe,[le,e("button",{class:"btn-text ms-auto underline",onClick:t[0]||(t[0]=r=>a())},"套用會員資料")]),o(g,{class:"flex flex-col gap-4"},{default:w(({errors:r})=>[e("div",ae,[ne,o(h,{type:"text",name:"姓名",class:V([{"border border-red-600":r.姓名},"p-4 rounded-2"]),rules:"required",modelValue:s(d).name,"onUpdate:modelValue":t[1]||(t[1]=c=>s(d).name=c),placeholder:"請輸入姓名"},null,8,["class","modelValue"]),o(b,{class:"text-red-600",name:"姓名"})]),e("div",re,[de,o(h,{type:"tel",name:"手機號碼",class:V([{"border border-red-600":r.手機號碼},"p-4 rounded-2"]),rules:m,modelValue:s(d).phone,"onUpdate:modelValue":t[2]||(t[2]=c=>s(d).phone=c),placeholder:"請輸入手機號碼"},null,8,["class","modelValue"]),o(b,{class:"text-red-600",name:"手機號碼"})]),e("div",ie,[ce,o(h,{type:"email",name:"Email",class:V([{"border border-red-600":r.Email},"p-4 rounded-2"]),rules:"required|email",modelValue:s(d).email,"onUpdate:modelValue":t[3]||(t[3]=c=>s(d).email=c),placeholder:"請輸入有效電子信箱"},null,8,["class","modelValue"]),o(b,{class:"text-red-600",name:"Email"})]),o(te),e("div",ue,[o(h,{type:"text",name:"詳細地址",class:V([{"border border-red-600":r.詳細地址},"p-4 rounded-2"]),modelValue:s(u),"onUpdate:modelValue":t[4]||(t[4]=c=>B(u)?u.value=c:null),rules:"required",placeholder:"請輸入詳細地址"},null,8,["class","modelValue"]),o(b,{name:"詳細地址",class:"text-red-600"})])]),_:1})],64)}}}),_e={key:0,class:"bg-primary-10"},pe={class:"container mx-auto px-4 xl:px-0 py-10 lg:py-30"},fe={class:"lg:flex lg:justify-between gap-18"},he={class:"basis-full lg:basis-7/12 mb-10 lg:mb-0"},be=e("h2",{class:"text-5 lg:text-7 mb-8 lg:mb-10 text-black"},"訂房資訊",-1),ge={class:"flex flex-col gap-6 pb-10 mb-10 lg:pb-[47px] lg:mb-[47px] border-b border-neutral-60"},xe=e("h3",{class:"title-deco ps-4 text-4 mb-2"},"選擇房型",-1),ve={class:"flex items-center"},$e=e("h3",{class:"title-deco ps-4 text-4 mb-2"},"訂房日期",-1),ye={class:"mb-2"},Ve={class:"flex items-center"},ke=e("h3",{class:"title-deco ps-4 text-4 mb-2"},"房客人數",-1),we={class:"pb-10 mb-10 lg:pb-[47px] lg:mb-[47px] border-b border-neutral-60"},Ne=e("h2",{class:"text-5 lg:text-7 mb-8 lg:mb-10 text-black"},"房間資訊",-1),De={class:"flex flex-col gap-6"},Se={class:"basis-full lg:basis-5/12"},Te={class:"sticky top-[120px]"},Ue={class:"bg-white p-6 lg:p-10 rounded-[20px]"},Ee={class:"flex flex-col gap-6 lg:gap-10"},Fe=["src","alt"],Re={class:"flex flex-col gap-6"},Ce=e("h2",{class:"text-5 lg:text-7"},"價格詳情",-1),Be={class:"flex flex-col gap-4"},je={class:"flex"},Le={class:"ms-auto"},Me={class:"flex pb-4 border-b border-neutral-40"},Oe=e("p",null,"住宿折扣",-1),ze={class:"ms-auto text-primary-100"},qe={class:"flex font-bold"},Ae=e("p",null,"總價",-1),Ie={class:"ms-auto"},Ze={__name:"BookingView",setup(S){const f=P(),{roomDetail:l,roomLayout:d}=$(f),u=f.getFrontRoom,m=A();$(m);const a=D(),{peopleNum:n,bookingDate:t}=$(a),h=a.createOrder,b=a.getStorageData,g=q();return z(()=>{u(),b()}),(r,c)=>{const T=y("font-awesome-icon"),N=y("router-link");return s(l)?(_(),p("main",_e,[e("div",pe,[e("div",fe,[e("div",he,[o(N,{to:`/room/${s(g).params.id}`,class:"text-6 lg:text-8 mb-[42px] flex items-center"},{default:w(()=>[o(T,{icon:"fa-solid fa-chevron-left",class:"text-6 lg:text-8 me-2"}),x("確認訂房資訊 ")]),_:1},8,["to"]),e("div",null,[be,e("div",ge,[e("div",null,[xe,e("p",null,i(s(l).name),1)]),e("div",ve,[e("div",null,[$e,e("p",ye,"入住："+i(r.$format.getTradDateFormat(s(t).start)),1),e("p",null,"退房："+i(r.$format.getTradDateFormat(s(t).end)),1)]),o(N,{to:`/room/${s(g).params.id}`,class:"underline ms-auto hover:text-primary-100"},{default:w(()=>[x("編輯")]),_:1},8,["to"])]),e("div",Ve,[e("div",null,[ke,e("p",null,i(s(n))+"人",1)]),o(N,{to:`/room/${s(g).params.id}`,class:"underline ms-auto hover:text-primary-100"},{default:w(()=>[x("編輯")]),_:1},8,["to"])])])]),e("div",we,[o(me)]),e("div",null,[Ne,e("div",De,[o(I,{info:s(l),layout:s(d)},null,8,["info","layout"])])])]),e("div",Se,[e("div",Te,[e("div",Ue,[e("div",Ee,[e("img",{src:s(l).imageUrl,class:"rounded-2 w-full h-[180px] lg:h-[272px] object-cover",alt:s(l).name},null,8,Fe),e("div",Re,[Ce,e("div",Be,[e("div",je,[e("p",null,[x("NT$ "+i(r.$format.toThousands(s(l).price))+" ",1),o(T,{icon:"fa-solid fa-xmark"}),x(" "+i(r.$format.getNightNum(s(t).start,s(t).end))+" 晚",1)]),e("p",Le,"NT$ "+i(r.$format.toThousands(s(l).price*r.$format.getNightNum(s(t).start,s(t).end))),1)]),e("div",Me,[Oe,e("p",ze,"NT$ "+i(s(l).discount?"roomDetail.discount":0),1)]),e("div",qe,[Ae,e("p",Ie," NT$ "+i(r.$format.toThousands(s(l).price)),1)])])]),e("button",{type:"button",class:"btn btn-primary text-bold",onClick:c[0]||(c[0]=Pe=>s(h)())},"確認訂房")])])])])])])])):j("",!0)}}};export{Ze as default};
