import{d as y,c as g,p as C,h as P,e as v,m as F,F as T,j as s,f as e,q as U,r as I,v as x,x as O,y as z,a as Y,z as H,s as D,b as N,t as d,g as b,A as q,k as R,u as K,B as Q,C as J,D as G,o as W}from"./index-wIY0i8YO.js";import{S as X,P as Z,a as ee}from"./pagination-OtxAtD04.js";import{_ as te}from"./RoomInfoMain.vue_vue_type_script_setup_true_lang-p2SycM-P.js";import{u as B}from"./modalStore-HMdcR1IR.js";import{u as se}from"./orderStore-mP__rcc5.js";import{u as oe}from"./roomStore-jor4PSpb.js";import"./RoomInfoBasic.vue_vue_type_script_setup_true_lang-WNVHQJEz.js";import"./RoomInfoProvide.vue_vue_type_script_setup_true_lang-8ADzT-1F.js";import"./swal-MzZ19o4Z.js";const ne=["src"],ae=y({__name:"RoomDetailImageSwiper",props:["imageList"],setup(n){const t=[Z];return(o,r)=>(g(),C(s(X),{pagination:!0,modules:t,class:"room-list-swiper h-[250px] md:h-[500px] duration-300"},{default:P(()=>[(g(!0),v(T,null,F(n.imageList,i=>(g(),C(s(ee),{class:"h-full",key:i},{default:P(()=>[e("img",{src:i,class:"w-full h-full object-cover",alt:"Room Image"},null,8,ne)]),_:2},1024))),128))]),_:1}))}}),re={class:"flex gap-2 bg-white rounded-[16px] overflow-hidden"},ie={class:"basis-6/12"},le=["src"],ce={class:"basis-6/12"},de={class:"grid grid-cols-2 gap-2 h-full"},ue=["src"],me=["src"],pe=["src"],fe=["src"],_e=y({__name:"RoomDetailBanner",props:["imageList"],setup(n){return(t,o)=>(g(),v("div",re,[e("div",ie,[e("img",{src:n.imageList[0],alt:"Room Image"},null,8,le)]),e("div",ce,[e("div",de,[e("div",null,[e("img",{class:"h-full w-full object-cover",src:n.imageList[1],alt:"Room Image"},null,8,ue)]),e("div",null,[e("img",{class:"h-full w-full object-cover",src:n.imageList[2],alt:"Room Image"},null,8,me)]),e("div",null,[e("img",{class:"h-full w-full object-cover",src:n.imageList[3],alt:"Room Image"},null,8,pe)]),e("div",null,[e("img",{class:"h-full w-full object-cover",src:n.imageList[4],alt:"Room Image"},null,8,fe)])])])]))}}),A=U("dateStore",()=>{const n={start:new Date,end:new Date},t=I({...n}),o=new Date;o.setDate(o.getDate()+1),t.value.end=o;const r=()=>{t.value={...n};const a=new Date;a.setDate(a.getDate()+1),t.value.end=a},i=x(()=>{const a=O.getLocalDateFormat(t.value.start),l=O.getLocalDateFormat(t.value.end);return{startDate:a,endDate:l}}),p=x(()=>i.value.startDate===i.value.endDate),f=x(()=>{const a=new Date(t.value.start),l=new Date(t.value.end);a.setHours(0,0,0,0),l.setHours(0,0,0,0);const m=l.getTime()-a.getTime();return Math.ceil(m/(1e3*60*60*24))});return{reserveDate:t,resetDate:r,reserveDateRange:i,sameDate:p,nightNum:f,setStorageDate:()=>{localStorage.setItem("storageDate",JSON.stringify(t.value))}}});function ge(){return typeof window<"u"}function he(n){return ge()&&n in window}function V({"min-width":n,min:t=n,max:o,raw:r}={}){return{min:t,max:o,raw:r}}function E(n,t=!0){return Array.isArray(n)?n.map(o=>{if(t&&Array.isArray(o))throw new Error("The tuple syntax is not supported for `screens`.");if(typeof o=="string")return{name:o.toString(),values:[{min:o,max:void 0}]};let[r,i]=o;return r=r.toString(),typeof i=="string"?{name:r,values:[{min:i,max:void 0}]}:Array.isArray(i)?{name:r,values:i.map(p=>V(p))}:{name:r,values:[V(i)]}}):E(Object.entries(n??{}),!1)}function be(n){return n.map(t=>t.raw!==void 0?t.raw:[t.min&&`(min-width: ${t.min})`,t.max&&`(max-width: ${t.max})`].filter(Boolean).join(" and ")).join(", ")}var xe={xs:"0px",sm:"640px",md:"768px",lg:"1024px",xl:"1280px"};const ve="$screens";function we(n){const t=H({screens:E(n||xe),queries:{},matches:{},hasSetup:!1});function o(){Object.entries(t.queries).forEach(([a,l])=>{t.matches[a]=l.matches})}function r(a){return x(()=>Object.keys(t.matches).filter(l=>t.matches[l]===!0&&a.hasOwnProperty(l)).map(l=>a[l]))}const i=x(()=>Object.keys(t.matches).filter(a=>t.matches[a]));function p(a,l){return x(()=>{const m=f.value;return m&&a.hasOwnProperty(m)?a[m]:l})}const f=x(()=>{const a=i.value;return a.length?a[a.length-1]:""});function c(){Object.values(t.queries).forEach(a=>a.removeEventListener("change",o)),t.queries={},t.matches={}}return!t.hasSetup&&he("matchMedia")&&(c(),t.queries=t.screens.reduce((a,{name:l,values:m})=>{const h=window.matchMedia(be(m));return h.addEventListener("change",o),a[l]=h,a},{}),o(),t.hasSetup=!0),{matches:t.matches,list:i,mapList:r,current:f,mapCurrent:p,cleanup:c}}function $e(n,t){const o=we(n);return z((t==null?void 0:t.injectKey)||ve,o),Y(()=>o.cleanup()),o}const De={key:0,class:"fixed top-0 left-0 w-full h-full bg-neutral-100/50 backdrop-blur-sm z-50"},ye={class:"container mx-auto h-full flex justify-center items-center"},Se={class:"w-full max-w-[740px]"},ke={class:"bg-white border border-neutral-40 rounded-5 overflow-hidden z-10"},Re={class:"p-6 md:p-8 flex flex-col gap-10"},je={class:"hidden md:flex md:items-center"},Le={class:"w-5/12"},Me={class:"text-6 font-bold"},Ce={class:"text-neutral-80"},Pe={class:"w-7/12 flex gap-2"},Oe={class:"grow border border-neutral-100 rounded-2 p-4 font-500"},Ve=e("p",{class:"text-3"},"入住",-1),Ie={class:"text-neutral-100"},Ne={class:"grow border border-neutral-100 rounded-2 p-4 font-500"},qe=e("p",{class:"text-3"},"退房",-1),Be={class:"text-neutral-100"},Ae={class:"hidden md:flex justify-between md:justify-end gap-4"},Ee=["disabled"],Fe=y({__name:"BookingDatePick",setup(n){const t=A(),{reserveDate:o,reserveDateRange:r,nightNum:i,sameDate:p}=D(t),f=t.resetDate,c=t.setStorageDate,a=B(),{isModalOpen:l}=D(a),m=a.closeModal,{mapCurrent:h}=$e({xs:"0px",sm:"640px",md:"768px",lg:"1024px"}),j=I("gray"),M=h({md:2,lg:2},1),u=h({md:1,lg:1},2),S=h({md:"center",lg:"center"},"left");return(L,_)=>{const k=N("VDatePicker");return s(l)?(g(),v("div",De,[e("div",ye,[e("div",Se,[e("div",ke,[e("div",Re,[e("div",je,[e("div",Le,[e("p",Me,d(s(i))+" 晚",1),e("p",Ce,d(s(r).endDate)+" - "+d(s(r).startDate),1)]),e("div",Pe,[e("div",Oe,[Ve,e("p",Ie,d(s(r).startDate),1)]),e("div",Ne,[qe,e("p",Be,d(s(r).endDate),1)])])]),b(k,{modelValue:s(o),"onUpdate:modelValue":_[0]||(_[0]=w=>q(o)?o.value=w:null),modelModifiers:{range:!0},mode:"date",color:j.value,columns:s(M),rows:s(u),"title-position":s(S),masks:{title:"YYYY 年 MMM"},"min-date":new Date,expanded:"expanded",borderless:""},null,8,["modelValue","color","columns","rows","title-position","min-date"]),e("div",Ae,[e("button",{class:"btn hover:bg-neutral-40",onClick:_[1]||(_[1]=w=>s(f)())},"清除日期"),e("button",{class:"btn btn-primary",onClick:_[2]||(_[2]=w=>(s(m)(),s(c)())),disabled:s(p)},"確定日期",8,Ee)])])])])])])):R("",!0)}}}),Te={class:"flex flex-col gap-10"},Ue=e("h2",{class:"text-6 text-black font-bold pb-4 border-b border-neutral-40"},"預定房型",-1),ze={class:"text-10 font-bold text-black mb-2"},Ye={class:"font-500"},He={class:"grow border border-neutral-100 rounded-2 p-4 font-500"},Ke=e("p",{class:"text-3"},"入住",-1),Qe={class:"text-black"},Je={class:"grow border border-neutral-100 rounded-2 p-4 font-500"},Ge=e("p",{class:"text-3"},"退房",-1),We={class:"text-black"},Xe={class:"flex items-center"},Ze=e("p",{class:"font-bold"},"人數",-1),et={class:"ms-auto"},tt=["disabled"],st=["disabled"],ot={key:0,class:"text-alert-120 text-center"},nt={class:"text-6 text-primary-100 font-bold"},at=["disabled"],rt=y({__name:"ReserveRoom",props:["info"],setup(n){const t=A(),{reserveDateRange:o,sameDate:r,nightNum:i}=D(t),p=t.setStorageDate,f=se(),{peopleNum:c}=D(f),a=f.setStoragePeople,m=B().openModal,h=K(),j=Q();return(M,u)=>{var L,_,k,w;const S=N("font-awesome-icon");return g(),v("div",Te,[Ue,e("div",null,[e("p",ze,d(n.info.name),1),e("p",Ye,d(n.info.description),1)]),e("div",{class:"flex gap-3",onClick:u[0]||(u[0]=$=>s(m)())},[e("div",He,[Ke,e("p",Qe,d(s(o).startDate),1)]),e("div",Je,[Ge,e("p",We,d(s(o).endDate),1)])]),b(Fe),e("div",Xe,[Ze,e("div",et,[e("div",null,[e("button",{class:"group rounded-full w-[56px] aspect-square p-4 border border-neutral-40 hover:bg-primary-100 active:bg-primary disabled:bg-neutral-10",onClick:u[1]||(u[1]=$=>c.value--),disabled:s(c)===1},[b(S,{icon:"fa-solid fa-minus",class:"group-hover:text-white group-active:text-white group-disabled:text-black"})],8,tt),J(e("input",{type:"number","onUpdate:modelValue":u[2]||(u[2]=$=>q(c)?c.value=$:null),class:"w-[48px] mx-4 text-center text-5 bg-white",disabled:""},null,512),[[G,s(c)]]),e("button",{class:"group rounded-full w-[56px] aspect-square p-4 border border-neutral-40 hover:bg-primary-100 active:bg-primary disabled:bg-neutral-10",onClick:u[3]||(u[3]=$=>c.value++),disabled:s(c)===((L=n.info)==null?void 0:L.maxPeople)},[b(S,{icon:"fa-solid fa-plus",class:"group-hover:text-white group-active:text-white group-disabled:text-black"})],8,st)]),s(c)===((_=n.info)==null?void 0:_.maxPeople)?(g(),v("p",ot,"房間最多 "+d((k=n.info)==null?void 0:k.maxPeople)+" 人",1)):R("",!0)])]),e("div",nt,"NT$ "+d(s(i)*((w=n.info)==null?void 0:w.price)),1),e("button",{onClick:u[4]||(u[4]=$=>(s(a)(),s(p)(),s(j).push(`/booking/${s(h).params.id}`))),class:"btn btn-primary disabled:bg-neutral-40",disabled:s(r)},"立即預訂",8,at)])}}}),it={key:0,class:"bg-primary-10"},lt={"aria-label":"room-detail-banner"},ct={class:"lg:hidden"},dt={class:"max-w-[1860px] mx-auto hidden lg:block px-2 py-20"},ut={key:0},mt={class:"container mx-auto px-4 sm:px-0 py-10 lg:py-30"},pt={class:"lg:flex lg:content-between gap-18"},ft={class:"basis-full lg:basis-7/12"},_t={class:"flex flex-col gap-6 lg:gap-20"},gt={class:"text-8 lg:text-12 text-black font-bold mb-4"},ht={class:"text-3h lg:text-4 font-500"},bt={class:"hidden lg:block lg:basis-5/12 z-1"},xt={class:"sticky top-[120px] rounded-5 bg-white p-10"},Lt=y({__name:"RoomDetail",setup(n){const t=oe(),{roomDetail:o,roomLayout:r}=D(t),i=t.getFrontRoom;return W(()=>{i()}),(p,f)=>s(o)?(g(),v("main",it,[e("div",lt,[e("div",ct,[b(ae,{"image-list":s(o).imageUrlList},null,8,["image-list"])]),e("div",dt,[s(o).imageUrlList?(g(),v("div",ut,[b(_e,{"image-list":s(o).imageUrlList},null,8,["image-list"])])):R("",!0)])]),e("section",mt,[e("div",pt,[e("div",ft,[e("div",_t,[e("div",null,[e("h1",gt,d(s(o).name),1),e("p",ht,d(s(o).description),1)]),b(te,{info:s(o),layout:s(r)},null,8,["info","layout"])])]),e("div",bt,[e("div",xt,[b(rt,{info:s(o)},null,8,["info"])])])])])])):R("",!0)}});export{Lt as default};
