import{d as y,e as f,p as P,i as O,f as v,m as F,F as T,c as s,g as e,q as U,r as I,v as x,x as Y,a as z,y as H,s as D,b as N,t as c,h,z as q,k as R,u as K,A as Q,B as J,C as G,o as W}from"./index-DsCx5gKH.js";import{P as X,S as Z,a as ee}from"./pagination-HLJwhH8E.js";import{_ as te}from"./RoomInfoMain.vue_vue_type_script_setup_true_lang-N9SwmlV2.js";import{f as M}from"./format-ue8EY1kP.js";import{u as B}from"./modalStore-_aiF8G9U.js";import{u as se}from"./orderStore-MeRE-p5V.js";import{u as oe}from"./roomStore-k656XMYe.js";import"./RoomInfoBasic.vue_vue_type_script_setup_true_lang-GGqDZVS7.js";import"./RoomInfoProvide.vue_vue_type_script_setup_true_lang-Nduxvp6t.js";import"./userApi-dxlgwfeL.js";import"./userStore-CKITT1b6.js";const ae=["src"],ne=y({__name:"RoomDetailImageSwiper",props:["imageList"],setup(a){const t=[X];return(o,i)=>(f(),P(s(ee),{pagination:!0,modules:t,class:"room-list-swiper h-[250px] md:h-[500px] duration-300"},{default:O(()=>[(f(!0),v(T,null,F(a.imageList,l=>(f(),P(s(Z),{class:"h-full",key:l},{default:O(()=>[e("img",{src:l,class:"w-full h-full object-cover",alt:"Room Image"},null,8,ae)]),_:2},1024))),128))]),_:1}))}}),re={class:"flex gap-2 bg-white rounded-[16px] overflow-hidden"},ie={class:"basis-6/12"},le=["src"],ce={class:"basis-6/12"},de={class:"grid grid-cols-2 gap-2 h-full"},ue=["src"],me=["src"],pe=["src"],fe=["src"],_e=y({__name:"RoomDetailBanner",props:["image","imageList"],setup(a){return(t,o)=>(f(),v("div",re,[e("div",ie,[e("img",{src:a.imageList[0],alt:"Room Image"},null,8,le)]),e("div",ce,[e("div",de,[e("div",null,[e("img",{class:"h-full w-full object-cover",src:a.imageList[1],alt:"Room Image"},null,8,ue)]),e("div",null,[e("img",{class:"h-full w-full object-cover",src:a.imageList[2],alt:"Room Image"},null,8,me)]),e("div",null,[e("img",{class:"h-full w-full object-cover",src:a.imageList[3],alt:"Room Image"},null,8,pe)]),e("div",null,[e("img",{class:"h-full w-full object-cover",src:a.imageList[4],alt:"Room Image"},null,8,fe)])])])]))}}),A=U("dateStore",()=>{const a={start:new Date,end:new Date},t=I({...a}),o=new Date;o.setDate(o.getDate()+1),t.value.end=o;const i=()=>{t.value={...a};const n=new Date;n.setDate(n.getDate()+1),t.value.end=n},l=x(()=>{const n=M.getLocalDateFormat(t.value.start),r=M.getLocalDateFormat(t.value.end);return{startDate:n,endDate:r}}),m=x(()=>l.value.startDate===l.value.endDate),_=x(()=>{const n=new Date(t.value.start),r=new Date(t.value.end);n.setHours(0,0,0,0),r.setHours(0,0,0,0);const u=r.getTime()-n.getTime();return Math.ceil(u/(1e3*60*60*24))});return{reserveDate:t,resetDate:i,reserveDateRange:l,sameDate:m,nightNum:_,setStorageDate:()=>{localStorage.setItem("storageDate",JSON.stringify(t.value))}}});function ge(){return typeof window<"u"}function he(a){return ge()&&a in window}function V({"min-width":a,min:t=a,max:o,raw:i}={}){return{min:t,max:o,raw:i}}function E(a,t=!0){return Array.isArray(a)?a.map(o=>{if(t&&Array.isArray(o))throw new Error("The tuple syntax is not supported for `screens`.");if(typeof o=="string")return{name:o.toString(),values:[{min:o,max:void 0}]};let[i,l]=o;return i=i.toString(),typeof l=="string"?{name:i,values:[{min:l,max:void 0}]}:Array.isArray(l)?{name:i,values:l.map(m=>V(m))}:{name:i,values:[V(l)]}}):E(Object.entries(a??{}),!1)}function be(a){return a.map(t=>t.raw!==void 0?t.raw:[t.min&&`(min-width: ${t.min})`,t.max&&`(max-width: ${t.max})`].filter(Boolean).join(" and ")).join(", ")}var xe={xs:"0px",sm:"640px",md:"768px",lg:"1024px",xl:"1280px"};const ve="$screens";function we(a){const t=H({screens:E(a||xe),queries:{},matches:{},hasSetup:!1});function o(){Object.entries(t.queries).forEach(([n,r])=>{t.matches[n]=r.matches})}function i(n){return x(()=>Object.keys(t.matches).filter(r=>t.matches[r]===!0&&n.hasOwnProperty(r)).map(r=>n[r]))}const l=x(()=>Object.keys(t.matches).filter(n=>t.matches[n]));function m(n,r){return x(()=>{const u=_.value;return u&&n.hasOwnProperty(u)?n[u]:r})}const _=x(()=>{const n=l.value;return n.length?n[n.length-1]:""});function b(){Object.values(t.queries).forEach(n=>n.removeEventListener("change",o)),t.queries={},t.matches={}}return!t.hasSetup&&he("matchMedia")&&(b(),t.queries=t.screens.reduce((n,{name:r,values:u})=>{const g=window.matchMedia(be(u));return g.addEventListener("change",o),n[r]=g,n},{}),o(),t.hasSetup=!0),{matches:t.matches,list:l,mapList:i,current:_,mapCurrent:m,cleanup:b}}function $e(a,t){const o=we(a);return Y((t==null?void 0:t.injectKey)||ve,o),z(()=>o.cleanup()),o}const De={key:0,class:"fixed top-0 left-0 w-full h-full bg-neutral-100/50 backdrop-blur-sm"},ye={class:"container mx-auto h-full flex justify-center items-center"},Se={class:"w-full max-w-[740px]"},ke={class:"bg-white border border-neutral-40 rounded-5 overflow-hidden z-10"},Re={class:"p-6 md:p-8 flex flex-col gap-10"},Le={class:"hidden md:flex md:items-center"},je={class:"w-5/12"},Me={class:"text-6 font-bold"},Ce={class:"text-neutral-80"},Pe={class:"w-7/12 flex gap-2"},Oe={class:"grow border border-neutral-100 rounded-2 p-4 font-500"},Ve=e("p",{class:"text-3"},"入住",-1),Ie={class:"text-neutral-100"},Ne={class:"grow border border-neutral-100 rounded-2 p-4 font-500"},qe=e("p",{class:"text-3"},"退房",-1),Be={class:"text-neutral-100"},Ae={class:"flex justify-between md:justify-end gap-4"},Ee=["disabled"],Fe=y({__name:"BookingDatePick",setup(a){const t=A(),{reserveDate:o,reserveDateRange:i,nightNum:l,sameDate:m}=D(t),_=t.resetDate,b=t.setStorageDate,n=B(),{isModalOpen:r}=D(n),u=n.closeModal,{mapCurrent:g}=$e({xs:"0px",sm:"640px",md:"768px",lg:"1024px"}),L=I("gray"),C=g({md:2,lg:2},1),d=g({md:1,lg:1},2),S=g({md:"center",lg:"center"},"left");return(j,p)=>{const k=N("VDatePicker");return s(r)?(f(),v("div",De,[e("div",ye,[e("div",Se,[e("div",ke,[e("div",Re,[e("div",Le,[e("div",je,[e("p",Me,c(s(l))+" 晚",1),e("p",Ce,c(s(i).endDate)+" - "+c(s(i).startDate),1)]),e("div",Pe,[e("div",Oe,[Ve,e("p",Ie,c(s(i).startDate),1)]),e("div",Ne,[qe,e("p",Be,c(s(i).endDate),1)])])]),h(k,{modelValue:s(o),"onUpdate:modelValue":p[0]||(p[0]=w=>q(o)?o.value=w:null),modelModifiers:{range:!0},mode:"date",color:L.value,columns:s(C),rows:s(d),"title-position":s(S),masks:{title:"YYYY 年 MMM"},"min-date":new Date,expanded:"expanded",borderless:""},null,8,["modelValue","color","columns","rows","title-position","min-date"]),e("div",Ae,[e("button",{class:"btn hover:bg-neutral-40",onClick:p[1]||(p[1]=w=>s(_)())},"清除日期"),e("button",{class:"btn btn-primary",onClick:p[2]||(p[2]=w=>(s(u)(),s(b)())),disabled:s(m)},"確定日期",8,Ee)])])])])])])):R("",!0)}}}),Te={class:"flex flex-col gap-10"},Ue=e("h2",{class:"text-6 text-black font-bold pb-4 border-b border-neutral-40"},"預定房型",-1),Ye={class:"text-10 font-bold text-black mb-2"},ze={class:"font-500"},He={class:"grow border border-neutral-100 rounded-2 p-4 font-500"},Ke=e("p",{class:"text-3"},"入住",-1),Qe={class:"text-black"},Je={class:"grow border border-neutral-100 rounded-2 p-4 font-500"},Ge=e("p",{class:"text-3"},"退房",-1),We={class:"text-black"},Xe={class:"flex items-center"},Ze=e("p",{class:"font-bold"},"人數",-1),et={class:"ms-auto"},tt=["disabled"],st=["disabled"],ot={key:0,class:"text-alert-120 text-center"},at={class:"text-6 text-primary-100 font-bold"},nt=["disabled"],rt=y({__name:"ReserveRoom",props:["info"],setup(a){const t=A(),{reserveDateRange:o,sameDate:i,nightNum:l}=D(t),m=t.setStorageDate,b=B().openModal,n=se(),{peopleNum:r}=D(n),u=n.setStoragePeople,g=K(),L=Q();return(C,d)=>{var j,p,k,w;const S=N("font-awesome-icon");return f(),v("div",Te,[Ue,e("div",null,[e("p",Ye,c(a.info.name),1),e("p",ze,c(a.info.description),1)]),e("div",{class:"flex gap-3",onClick:d[0]||(d[0]=$=>s(b)())},[e("div",He,[Ke,e("p",Qe,c(s(o).startDate),1)]),e("div",Je,[Ge,e("p",We,c(s(o).endDate),1)])]),h(Fe),e("div",Xe,[Ze,e("div",et,[e("div",null,[e("button",{class:"group rounded-full w-[56px] aspect-square p-4 border border-neutral-40 hover:bg-primary-100 active:bg-primary disabled:bg-neutral-10",onClick:d[1]||(d[1]=$=>r.value--),disabled:s(r)===1},[h(S,{icon:"fa-solid fa-minus",class:"group-hover:text-white group-active:text-white group-disabled:text-black"})],8,tt),J(e("input",{type:"number","onUpdate:modelValue":d[2]||(d[2]=$=>q(r)?r.value=$:null),class:"w-[48px] mx-4 text-center text-5 bg-white",disabled:""},null,512),[[G,s(r)]]),e("button",{class:"group rounded-full w-[56px] aspect-square p-4 border border-neutral-40 hover:bg-primary-100 active:bg-primary disabled:bg-neutral-10",onClick:d[3]||(d[3]=$=>r.value++),disabled:s(r)===((j=a.info)==null?void 0:j.maxPeople)},[h(S,{icon:"fa-solid fa-plus",class:"group-hover:text-white group-active:text-white group-disabled:text-black"})],8,st)]),s(r)===((p=a.info)==null?void 0:p.maxPeople)?(f(),v("p",ot,"房間最多 "+c((k=a.info)==null?void 0:k.maxPeople)+" 人",1)):R("",!0)])]),e("div",at,"NT$ "+c(s(M).toThousands(s(l)*((w=a.info)==null?void 0:w.price))),1),e("button",{onClick:d[4]||(d[4]=$=>(s(u)(),s(m)(),s(L).push(`/booking/${s(g).params.id}`))),class:"btn btn-primary disabled:bg-neutral-40",disabled:s(i)},"立即預訂",8,nt)])}}}),it={key:0,class:"bg-primary-10"},lt={"aria-label":"room-detail-banner"},ct={class:"lg:hidden"},dt={class:"max-w-[1860px] mx-auto hidden lg:block px-2 py-20"},ut={key:0},mt={class:"container mx-auto px-4 sm:px-0 py-10 lg:py-30"},pt={class:"lg:flex lg:content-between gap-18"},ft={class:"basis-full lg:basis-7/12"},_t={class:"flex flex-col gap-6 lg:gap-20"},gt={class:"text-8 lg:text-12 text-black font-bold mb-4"},ht={class:"text-3h lg:text-4 font-500"},bt={class:"lg:basis-5/12"},xt={class:"sticky top-[120px] rounded-5 bg-white p-10"},Ct=y({__name:"RoomDetail",setup(a){const t=oe(),{roomDetail:o,roomLayout:i}=D(t),l=t.getFrontRoom;return W(()=>{l()}),(m,_)=>s(o)?(f(),v("main",it,[e("div",lt,[e("div",ct,[h(ne,{"image-list":s(o).imageUrlList},null,8,["image-list"])]),e("div",dt,[s(o).imageUrlList?(f(),v("div",ut,[h(_e,{image:s(o).imageUrl,"image-list":s(o).imageUrlList},null,8,["image","image-list"])])):R("",!0)])]),e("section",mt,[e("div",pt,[e("div",ft,[e("div",_t,[e("div",null,[e("h1",gt,c(s(o).name),1),e("p",ht,c(s(o).description),1)]),h(te,{info:s(o),layout:s(i)},null,8,["info","layout"])])]),e("div",bt,[e("div",xt,[h(rt,{info:s(o)},null,8,["info"])])])])])])):R("",!0)}});export{Ct as default};
