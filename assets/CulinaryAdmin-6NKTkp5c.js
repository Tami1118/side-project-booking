import{s as F,b as k,c as i,e as u,f as e,t as _,j as t,g as n,h as D,n as w,k as v,d as T,i as p,N as S,o as q,F as M,m as B,p as N}from"./index-6y3oVoyK.js";import{u as V}from"./foodStore-JRGqPDXb.js";import{u as J}from"./userStore-bGPss8dm.js";import"./swal-dnbtQsbR.js";const O={class:"fixed top-0 left-0 w-full h-full bg-neutral-100/50 backdrop-blur-sm flex justify-center items-center"},z={"data-aos":"fade-up","data-aos-delay":"50","data-aos-duration":"300",class:"bg-white w-full md:w-2/3 xl:w-1/3 h-full md:h-fit md:max-h-[80vh] xl:max-h-[70vh] md:rounded-4 overflow-scroll duration-500 ease-in"},E={class:"sticky top-0 px-5 py-4 z-10 border-b border-primary flex justify-between bg-primary-40 text-primary"},L={class:"text-5"},A={class:"p-4 flex flex-col gap-4"},I=e("label",{for:"food-title",class:"font-bold"},"名稱",-1),R=e("label",{for:"food-diningTime",class:"font-bold"},"供應時間",-1),G=e("label",{for:"food-description",class:"font-bold"},"內容",-1),H=e("label",{for:"food-image",class:"font-bold"},"圖片",-1),K=["src"],P={class:"bg-white sticky bottom-0 z-10 border-t border-primary-60 p-4 flex gap-2 justify-end"},Q={type:"submit",class:"btn btn-primary"},W={__name:"FoodModal",setup(C){const r=V(),{updateFoodType:d,tempFood:o}=F(r),h=r.createFood,y=r.editFood,s=r.closeFoodModal;return(b,l)=>{const f=k("VField"),x=k("ErrorMessage"),$=k("VForm");return i(),u("div",O,[e("div",z,[e("div",E,[e("h1",L,_(t(d)==="create"?"新增":"編輯")+"美饌",1),e("span",{class:"material-icons cursor-pointer",onClick:l[0]||(l[0]=m=>t(s)())},"close")]),n($,{class:"flex flex-col",onSubmit:l[6]||(l[6]=m=>(t(d)==="create"?t(h)():t(y)(),t(s)()))},{default:D(({errors:m})=>[e("div",A,[e("div",null,[I,n(f,{type:"text",id:"food-title",name:"名稱",class:w([{"is-invalid":m.名稱},"form-input"]),rules:"required",modelValue:t(o).title,"onUpdate:modelValue":l[1]||(l[1]=c=>t(o).title=c),placeholder:"請輸入名稱"},null,8,["class","modelValue"]),n(x,{name:"名稱",class:"text-alert-100 text-3h"})]),e("div",null,[R,n(f,{type:"text",id:"food-diningTime",name:"供應時間",class:w([{"is-invalid":m.供應時間},"form-input"]),rules:"required",modelValue:t(o).diningTime,"onUpdate:modelValue":l[2]||(l[2]=c=>t(o).diningTime=c),placeholder:"請輸入供應時間"},null,8,["class","modelValue"]),n(x,{name:"供應時間",class:"text-alert-100 text-3h"})]),e("div",null,[G,n(f,{as:"textarea",id:"food-description",name:"內容",class:w([{"is-invalid":m.內容},"form-input"]),rules:"required",modelValue:t(o).description,"onUpdate:modelValue":l[3]||(l[3]=c=>t(o).description=c),placeholder:"請輸入內容"},null,8,["class","modelValue"]),n(x,{name:"內容",class:"text-alert-100 text-3h"})]),e("div",null,[H,n(f,{type:"text",id:"food-image",name:"圖片",class:w([{"is-invalid":m.圖片},"form-input"]),rules:"required",modelValue:t(o).image,"onUpdate:modelValue":l[4]||(l[4]=c=>t(o).image=c),placeholder:"請輸入圖片連結"},null,8,["class","modelValue"]),n(x,{name:"圖片",class:"text-alert-100 text-3h"}),t(o).image?(i(),u("img",{key:0,src:t(o).image,class:"mt-2 rounded-2 h-[200px] w-full object-cover",alt:""},null,8,K)):v("",!0)])]),e("div",P,[e("button",{type:"button",class:"btn btn-secondary",onClick:l[5]||(l[5]=c=>t(s)())},"取消"),e("button",Q,"確認"+_(t(d)==="create"?"新增":"更新"),1)])]),_:1})])])}}},X={class:"w-full h-[30vh] lg:h-[24vh] flex justify-center items-center px-6"},Y={class:"text-5 font-bold text-justify"},Z={class:"text-primary-100"},ee={class:"p-3 flex gap-4 border-t border-primary-60"},te=T({__name:"FoodDelete",setup(C){const r=V(),{tempFood:d}=F(r),o=r.closeFoodDelModal,h=r.deleteFood;return(y,s)=>(i(),u("div",{onClick:s[3]||(s[3]=S(b=>t(o)(),["stop"])),class:"fixed top-0 left-0 w-full h-full bg-black/40 backdrop-blur-sm flex justify-center items-end lg:items-center"},[e("div",{onClick:s[2]||(s[2]=S(()=>{},["stop"])),class:"bg-white rounded-t-[16px] lg:rounded-[16px] w-full lg:w-[36vw]"},[e("div",X,[e("p",Y,[p(" 刪除後無法復原，確定要刪除 "),e("span",Z,_(t(d).title),1),p(" 嗎？ ")])]),e("div",ee,[e("button",{class:"btn btn-secondary w-full",onClick:s[0]||(s[0]=b=>t(o)())},"關閉視窗"),e("button",{class:"btn btn-primary w-full",onClick:s[1]||(s[1]=b=>(t(h)(),t(o)()))},"刪除")])])]))}}),oe={class:"p-10 flex flex-col gap-6"},se={class:"flex items-end"},le=e("h1",{class:"text-7"},"美饌管理",-1),ne={key:0,class:"font-bold ms-2"},ae={class:"text-primary-100"},ie={key:0,class:"text-primary-100 text-7 font-bold w-full h-[70vh] flex justify-center items-center"},re={key:1,class:"w-full admin-table"},de=e("thead",null,[e("tr",{class:"border-y border-primary-60"},[e("th",{class:"text-start",width:"15%"}),e("th",{class:"text-center",width:"10%"},"名稱"),e("th",{class:"text-center",width:"30%"},"內容"),e("th",{class:"text-center",width:"20%"},"供應時間"),e("th",{class:"text-center",width:"25%"},"管理")])],-1),ce=["src","alt"],ue={class:"text-center"},me={class:"text-justify"},pe={class:"text-center"},fe={class:"flex flex-wrap justify-center gap-2"},_e=["onClick"],he=["onClick"],we=T({__name:"CulinaryAdmin",setup(C){const r=V(),{foodList:d,tempFood:o,editFoodId:h,updateFoodType:y,showFoodModal:s,showDelModal:b}=F(r),l=r.getFoods,f=J(),{isChecked:x}=F(f),$=f.checkUser,m=()=>{x.value&&l()},c=async()=>{await $(),m()};return q(()=>{c()}),(be,j)=>{const g=k("font-awesome-icon");return i(),u(M,null,[e("div",oe,[e("div",se,[le,t(d)?(i(),u("p",ne,[p("(共 "),e("span",ae,_(t(d).length),1),p(" 筆資料)")])):v("",!0)]),e("button",{class:"btn btn-primary ms-auto",onClick:j[0]||(j[0]=a=>(s.value=!0,y.value="create"))},[n(g,{icon:"fa-solid fa-plus",class:"me-2"}),p(" 新增美饌 ")]),t(d)?(i(),u("table",re,[de,e("tbody",null,[(i(!0),u(M,null,B(t(d),a=>(i(),u("tr",{key:a._id,class:"border-b border-primary-60 hover:bg-primary-40"},[e("th",null,[a.image?(i(),u("img",{key:0,class:"w-full h-[120px] object-cover rounded-2",src:a.image,alt:a.title},null,8,ce)):v("",!0)]),e("th",ue,_(a.title),1),e("th",me,_(a.description),1),e("th",pe,_(a.diningTime),1),e("th",null,[e("div",fe,[e("button",{onClick:U=>(s.value=!0,o.value=JSON.parse(JSON.stringify(a)),y.value="edit",h.value=a._id),class:"btn btn-primary text-4h"},[n(g,{icon:"fa-solid fa-pencil",class:"me-2"}),p(" 編輯 ")],8,_e),e("button",{onClick:U=>(b.value=!0,o.value=JSON.parse(JSON.stringify(a)),h.value=a._id),class:"btn text-primary-100 text-4h hover:text-primary border border-primary-100 hover:border-primary bg-transparent hover:bg-primary-60"},[n(g,{icon:"fa-solid fa-trash-can",class:"me-2"}),p(" 刪除 ")],8,he)])])]))),128))])])):(i(),u("div",ie,[n(g,{icon:"fa-solid fa-utensils",class:"me-2"}),p(" 目前還沒有任何美食，快去新增吧！ ")]))]),t(s)?(i(),N(W,{key:0})):v("",!0),t(b)?(i(),N(te,{key:1})):v("",!0)],64)}}});export{we as default};
