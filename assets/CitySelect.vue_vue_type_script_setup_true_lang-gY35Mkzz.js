import{d as S,s as D,o as I,y as w,w as C,c as r,e as i,f as c,B as _,J as y,j as m,F as h,m as g,t as b,u as N,n as $,z as k,C as B}from"./index-LqCQ5WvY.js";import{u as U}from"./userStore-cSLgexoZ.js";import{t as f}from"./taiwanCities-y_p8gqPp.js";const M=c("label",{for:"birthdate",class:"form-label text-white"},"生日",-1),A={class:"flex gap-2"},F=["value"],L=["value"],R=["value"],K=S({__name:"DateSelect",setup(V){const x=U(),{birthdate:t,userInfo:u}=D(x);I(()=>{var e;console.log("birthdate",t.value),console.log("userInfo",u.value);let l=(((e=u.value)==null?void 0:e.birthday)??"").match(/^(\d{4})-(\d{2})-(\d{2})/);l&&(t.value.year=parseInt(l[1]),t.value.month=parseInt(l[2]),t.value.day=parseInt(l[3]),console.log(t.value))});const n=w(()=>{const a=t.value.year,l=t.value.month;return l===2?a%400===0||a%100!==0&&a%4===0?29:28:[4,6,9,11].includes(l)?30:31}),d=()=>{const a=n.value;t.value.day>a&&(t.value.day=a)};return C(()=>t.value.year,d),C(()=>t.value.month,d),(a,l)=>(r(),i("div",null,[M,c("div",A,[_(c("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>m(t).year=e),class:"form-input",onChange:d},[(r(!0),i(h,null,g(Array.from({length:new Date().getFullYear()-1899},(e,p)=>p+1900).reverse(),e=>(r(),i("option",{key:e,value:e},b(e)+" 年",9,F))),128))],544),[[y,m(t).year]]),_(c("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>m(t).month=e),class:"form-input",onChange:d},[(r(!0),i(h,null,g(Array.from({length:12},(e,p)=>p+1),e=>(r(),i("option",{key:e,value:e},b(e)+" 月",9,L))),128))],544),[[y,m(t).month]]),_(c("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>m(t).day=e),class:"form-input"},[(r(!0),i(h,null,g(n.value,e=>(r(),i("option",{key:e,value:e},b(e)+" 日",9,R))),128))],512),[[y,m(t).day]])])]))}}),Y={class:"flex flex-col space-y-1"},Z={class:""},T={class:"flex space-x-2"},j=["value"],E=["value"],J={class:"mt-3"},O=S({__name:"CitySelect",setup(V){const x=N(),t=U(),{selectedCity:u,selectedDistrict:n,detailedAddress:d,selectedZip:a,userInfo:l}=D(t),e=w(()=>f.map(v=>v.name)),p=w(()=>{const v=f.find(s=>s.name===u.value);return v?v.districts:[]}),z=()=>{n.value=p.value.length>0?p.value[0].name??"":""};return C(n,()=>{console.log(a.value,u.value,n.value);const v=f.find(s=>s.name===u.value);if(v){const s=v.districts.find(o=>o.name===n.value);s?a.value=Number(s.zip):a.value=NaN}else a.value=NaN;console.log(a.value)}),I(()=>{if(console.log(123131321321),x.fullPath==="/user"){console.log(l.value),a.value=l.value.address.zipcode,console.log(a.value);for(const v of f){const s=v.districts.find(o=>o.zip===a.value.toString());if(s){console.log(s),u.value=v.name,n.value=s.name;break}}d.value=l.value.address.detail.replace(u.value,""),d.value=d.value.replace(n.value,"")}else console.log(f[0]),u.value=f[0].name,n.value=f[0].districts[0].name}),console.log(123131321321),(v,s)=>(r(),i("div",Y,[c("label",{for:"district",class:$(["form-label",m(x).name==="booking"?"text-neutral":"text-white"])},"地區",2),c("div",Z,[c("div",T,[_(c("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>k(u)?u.value=o:null),class:"form-input block w-full mt-1",onChange:z},[(r(!0),i(h,null,g(e.value,o=>(r(),i("option",{key:o,value:o},b(o),9,j))),128))],544),[[y,m(u)]]),_(c("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>k(n)?n.value=o:null),class:"form-input block w-full mt-1"},[(r(!0),i(h,null,g(p.value,o=>(r(),i("option",{key:o.zip,value:o.name},b(o.name),9,E))),128))],512),[[y,m(n)]])]),c("div",J,[_(c("input",{type:"text",id:"address","onUpdate:modelValue":s[2]||(s[2]=o=>k(d)?d.value=o:null),class:"form-input mt-1 block w-full",placeholder:"請輸入詳細地址"},null,512),[[B,m(d)]])])])]))}});export{K as _,O as a};
