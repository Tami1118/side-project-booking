import{d as C,s as v,r as T,y as U,w as O,o as B,c as _,e as p,f as e,B as E,J as F,F as V,m as R,j as s,z as j,k as L,K as M,t as c,b as $,g as a,h as k,n as y,i as x,u as z}from"./index-z3ySx_ID.js";import{u as q,_ as A}from"./dateStore-HjSJQrsQ.js";import{u as N}from"./orderStore-gc7eWQFE.js";import{u as I}from"./roomStore-wVNc3MzB.js";import"./RoomInfoBasic.vue_vue_type_script_setup_true_lang-Wy6dks3Z.js";import"./RoomInfoProvide.vue_vue_type_script_setup_true_lang-QDVI9YvK.js";import"./swal-MzZ19o4Z.js";const P=e("label",{for:"userAddress"},"地址",-1),J={key:0,class:"grid grid-cols-2 gap-2"},K={class:"relative"},G=e("option",{value:"",selected:""},"請選擇縣市",-1),H=["value"],Q=e("div",{class:"absolute top-0 bottom-0 right-0 m-auto p-4"},[e("span",{class:"material-icons"},"keyboard_arrow_down")],-1),W={class:"relative"},X=e("option",{value:"",selected:""},"請選擇行政區",-1),Y=["value"],Z=e("div",{class:"absolute top-0 bottom-0 right-0 m-auto p-4"},[e("span",{class:"material-icons"},"keyboard_arrow_down")],-1),ee=C({__name:"AddressForm",setup(D){const b=N(),{selectDistrict:n}=v(b),l=T(null),m=async()=>{try{const r=await M.get("/api/abc873693/2804e64324eaaf26515281710e1792df/raw/a1e1fc17d04b47c564bbd9dba0d59a6a325ec7c1/taiwan_districts.json");l.value=r.data}catch(t){console.log(t)}},h=U(()=>l.value?l.value.map(t=>t.name):[]),f=U(()=>{if(l.value){const t=l.value.find(r=>r.name===i.value);return t?t.districts:[]}else return[]}),i=T("");return O(i,t=>{t&&(n.value="")}),B(()=>{m()}),(t,r)=>(_(),p(V,null,[P,l.value?(_(),p("div",J,[e("div",K,[E(e("select",{name:"縣市",id:"","onUpdate:modelValue":r[0]||(r[0]=o=>i.value=o),class:"form-input"},[G,(_(!0),p(V,null,R(h.value,o=>(_(),p("option",{key:o,value:o},c(o),9,H))),128))],512),[[F,i.value]]),Q]),e("div",null,[e("div",W,[E(e("select",{name:"行政區",id:"","onUpdate:modelValue":r[1]||(r[1]=o=>j(n)?n.value=o:null),class:"form-input"},[X,(_(!0),p(V,null,R(f.value,o=>(_(),p("option",{key:o.zip,value:o.zip},c(o.name),9,Y))),128))],512),[[F,s(n)]]),Z])])])):L("",!0)],64))}});var te={VITE_URL:"https://freyja-g4ow.onrender.com",BASE_URL:"/side-project-booking/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const se={class:"flex mb-8 lg:mb-10"},oe=e("h2",{class:"text-5 lg:text-7 text-black"},"訂房人資訊",-1),le={class:"flex flex-col gap-2"},ae=e("label",{for:"userName"},"姓名",-1),ne={class:"flex flex-col gap-2"},re=e("label",{for:"userPhone"},"手機號碼",-1),de={class:"flex flex-col gap-2"},ie=e("label",{for:"userEmail"},"電子信箱",-1),ce={class:"flex flex-col gap-2"},ue=C({__name:"BookingForm",setup(D){const{VITE_URL:b}=te,n=N(),{userInfo:l,addressDetail:m}=v(n),h=i=>/^(09)[0-9]{8}$/.test(i)?!0:"請輸入正確電話號碼格式，例如 0987654321",f=()=>{const i=`${b}/api/v1/user`;M.get(i).then(t=>{l.value=t.data.result,m.value=t.data.result.address.detail,console.log("getUser 成功",l.value)}).catch(t=>{console.log("getUser 失敗",t)})};return(i,t)=>{const r=$("VField"),o=$("ErrorMessage"),g=$("VForm");return _(),p(V,null,[e("div",se,[oe,e("button",{class:"btn-text ms-auto underline",onClick:t[0]||(t[0]=d=>f())},"套用會員資料")]),a(g,{class:"flex flex-col gap-4"},{default:k(({errors:d})=>[e("div",le,[ae,a(r,{type:"text",name:"姓名",class:y([{"border border-red-600":d.姓名},"p-4 rounded-2"]),rules:"required",modelValue:s(l).name,"onUpdate:modelValue":t[1]||(t[1]=u=>s(l).name=u),placeholder:"請輸入姓名"},null,8,["class","modelValue"]),a(o,{class:"text-red-600",name:"姓名"})]),e("div",ne,[re,a(r,{type:"tel",name:"手機號碼",class:y([{"border border-red-600":d.手機號碼},"p-4 rounded-2"]),rules:h,modelValue:s(l).phone,"onUpdate:modelValue":t[2]||(t[2]=u=>s(l).phone=u),placeholder:"請輸入手機號碼"},null,8,["class","modelValue"]),a(o,{class:"text-red-600",name:"手機號碼"})]),e("div",de,[ie,a(r,{type:"email",name:"Email",class:y([{"border border-red-600":d.Email},"p-4 rounded-2"]),rules:"required|email",modelValue:s(l).email,"onUpdate:modelValue":t[3]||(t[3]=u=>s(l).email=u),placeholder:"請輸入有效電子信箱"},null,8,["class","modelValue"]),a(o,{class:"text-red-600",name:"Email"})]),a(ee),e("div",ce,[a(r,{type:"text",name:"詳細地址",class:y([{"border border-red-600":d.詳細地址},"p-4 rounded-2"]),modelValue:s(m),"onUpdate:modelValue":t[4]||(t[4]=u=>j(m)?m.value=u:null),rules:"required",placeholder:"請輸入詳細地址"},null,8,["class","modelValue"]),a(o,{name:"詳細地址",class:"text-red-600"})])]),_:1})],64)}}}),me={key:0,class:"bg-primary-10"},_e={class:"container mx-auto px-4 xl:px-0 py-10 lg:py-30"},pe={class:"lg:flex lg:justify-between gap-18"},fe={class:"basis-full lg:basis-7/12 mb-10 lg:mb-0"},be=e("h2",{class:"text-5 lg:text-7 mb-8 lg:mb-10 text-black"},"訂房資訊",-1),he={class:"flex flex-col gap-6 pb-10 mb-10 lg:pb-[47px] lg:mb-[47px] border-b border-neutral-60"},ge=e("h3",{class:"title-deco ps-4 text-4 mb-2"},"選擇房型",-1),xe={class:"flex items-center"},ve=e("h3",{class:"title-deco ps-4 text-4 mb-2"},"訂房日期",-1),$e={class:"mb-2"},ye={class:"flex items-center"},Ve=e("h3",{class:"title-deco ps-4 text-4 mb-2"},"房客人數",-1),ke={class:"pb-10 mb-10 lg:pb-[47px] lg:mb-[47px] border-b border-neutral-60"},we=e("h2",{class:"text-5 lg:text-7 mb-8 lg:mb-10 text-black"},"房間資訊",-1),Ne={class:"flex flex-col gap-6"},De={class:"basis-full lg:basis-5/12"},Se={class:"sticky top-[120px]"},Te={class:"bg-white p-6 lg:p-10 rounded-[20px]"},Ue={class:"flex flex-col gap-6 lg:gap-10"},Ee=["src","alt"],Fe={class:"flex flex-col gap-6"},Re=e("h2",{class:"text-5 lg:text-7"},"價格詳情",-1),Ce={class:"flex flex-col gap-4"},Be={class:"flex"},je={class:"ms-auto"},Le={class:"flex pb-4 border-b border-neutral-40"},Me=e("p",null,"住宿折扣",-1),Oe={class:"ms-auto text-primary-100"},ze={class:"flex font-bold"},qe=e("p",null,"總價",-1),Ae={class:"ms-auto"},Xe={__name:"BookingView",setup(D){const b=I(),{roomDetail:n,roomLayout:l}=v(b),m=b.getFrontRoom,h=q();v(h);const f=N(),{peopleNum:i,bookingDate:t}=v(f),r=f.createOrder,o=f.getStorageData,g=z();return B(()=>{m(),o()}),(d,u)=>{const S=$("font-awesome-icon"),w=$("router-link");return s(n)?(_(),p("main",me,[e("div",_e,[e("div",pe,[e("div",fe,[a(w,{to:`/room/${s(g).params.id}`,class:"text-6 lg:text-8 mb-[42px] flex items-center"},{default:k(()=>[a(S,{icon:"fa-solid fa-chevron-left",class:"text-6 lg:text-8 me-2"}),x("確認訂房資訊 ")]),_:1},8,["to"]),e("div",null,[be,e("div",he,[e("div",null,[ge,e("p",null,c(s(n).name),1)]),e("div",xe,[e("div",null,[ve,e("p",$e,"入住："+c(d.$format.getTradDateFormat(s(t).start)),1),e("p",null,"退房："+c(d.$format.getTradDateFormat(s(t).end)),1)]),a(w,{to:`/room/${s(g).params.id}`,class:"underline ms-auto hover:text-primary-100"},{default:k(()=>[x("編輯")]),_:1},8,["to"])]),e("div",ye,[e("div",null,[Ve,e("p",null,c(s(i))+"人",1)]),a(w,{to:`/room/${s(g).params.id}`,class:"underline ms-auto hover:text-primary-100"},{default:k(()=>[x("編輯")]),_:1},8,["to"])])])]),e("div",ke,[a(ue)]),e("div",null,[we,e("div",Ne,[a(A,{info:s(n),layout:s(l)},null,8,["info","layout"])])])]),e("div",De,[e("div",Se,[e("div",Te,[e("div",Ue,[e("img",{src:s(n).imageUrl,class:"rounded-2 w-full h-[180px] lg:h-[272px] object-cover",alt:s(n).name},null,8,Ee),e("div",Fe,[Re,e("div",Ce,[e("div",Be,[e("p",null,[x("NT$ "+c(d.$format.toThousands(s(n).price))+" ",1),a(S,{icon:"fa-solid fa-xmark"}),x(" "+c(d.$format.getNightNum(s(t).start,s(t).end))+" 晚",1)]),e("p",je,"NT$ "+c(d.$format.toThousands(s(n).price*d.$format.getNightNum(s(t).start,s(t).end))),1)]),e("div",Le,[Me,e("p",Oe,"NT$ "+c(s(n).discount?"roomDetail.discount":0),1)]),e("div",ze,[qe,e("p",Ae," NT$ "+c(d.$format.toThousands(s(n).price)),1)])])]),e("button",{type:"button",class:"btn btn-primary text-bold",onClick:u[0]||(u[0]=Ie=>s(r)())},"確認訂房")])])])])])])])):L("",!0)}}};export{Xe as default};
