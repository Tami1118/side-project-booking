import{d as I,s as y,A as R,b as M,c as r,e as c,f as e,t as l,i as s,g as x,k as b,F as j,m as U,n as B,v as T,r as S,w as C,o as H,h as z,j as A}from"./index-Bx7n4dr3.js";import{_ as E}from"./UserBanner.vue_vue_type_style_index_0_lang-iLlbohPE.js";import{f as u}from"./format-ue8EY1kP.js";import{_ as N}from"./RoomInfoProvide.vue_vue_type_script_setup_true_lang-Ma0R2R08.js";import{u as P}from"./modalStore-cwRxDO8c.js";import{u as F}from"./orderStore-KwaGnrws.js";import{u as W}from"./userStore-s7XRrkk9.js";import"./swal-VkHh6Fna.js";const q={key:0,class:"flex flex-col gap-6 lg:gap-10"},G={class:"text-neutral-60 mb-2 text-3h lg:text-4"},J={class:"text-4 lg:text-6"},K=["src","alt"],Q={class:"flex flex-col gap-6 text-3h lg:text-4 text-neutral-80 font-bold pb-6 border-b border-neutral-40"},X={class:"flex gap-4 lg:text-5"},Y={class:"pe-4 border-r border-neutral-60"},Z={class:"title-deco ps-4 mb-2"},ee={class:"title-deco ps-4"},te=e("h3",{class:"title-deco text-3h lg:text-4 ps-4 mb-6 text-neutral"},"房內設備",-1),oe=e("h3",{class:"title-deco text-3h lg:text-4 ps-4 mb-6 text-neutral"},"備品提供",-1),se={class:"flex gap-3"},le={key:1,class:"fixed top-0 left-0 bg-black/40 backdrop-blur-sm w-full h-full z-10 flex justify-center items-center"},ne={class:"bg-white rounded-2 relative"},re=e("p",{class:"px-[164px] py-[100px] text-5 font-bold"}," 確定要取消此房型的預約嗎？ ",-1),ce={class:"p-3 flex gap-4 border-t border-neutral-40"},ae=I({__name:"OrderRoomDetail",props:["order"],setup(t){const m=P(),{isModalOpen:p}=y(m),g=m.openModal,h=m.closeModal,k=F().deleteFrontOrder,o=R();return(f,a)=>{const w=M("font-awesome-icon");return r(),c(j,null,[t.order?(r(),c("div",q,[e("div",null,[e("p",G,"預定參考編號："+l(t.order._id),1),e("h2",J,l(new Date(t.order.checkInDate)>new Date?"即將來的行程":"已結束行程"),1)]),e("img",{class:"h-[200px] w-full rounded-5 object-cover",src:t.order.roomId.imageUrl,alt:t.order.roomId.name},null,8,K),e("div",Q,[e("div",X,[e("p",Y,l(t.order.roomId.name)+"，"+l(s(u).getNightNum(t.order.checkInDate,t.order.checkOutDate))+" 晚",1),e("p",null,"住宿人數："+l(t.order.peopleNum)+" 位",1)]),e("div",null,[e("div",Z,"入住："+l(s(u).getTradDateSecondary(t.order.checkInDate))+"，15:00 可入住",1),e("div",ee,"退房："+l(s(u).getTradDateSecondary(t.order.checkOutDate))+"，12:00 前退房",1)]),e("div",null,"NT$ "+l(s(u).toThousands(t.order.roomId.price)),1)]),e("div",null,[te,x(N,{info:t.order.roomId.amenityInfo},null,8,["info"])]),e("div",null,[oe,x(N,{info:t.order.roomId.facilityInfo},null,8,["info"])]),e("div",se,[new Date(t.order.checkInDate)>new Date?(r(),c("button",{key:0,class:"grow btn btn-secondary",onClick:a[0]||(a[0]=_=>s(g)())},"取消訂單")):b("",!0),e("button",{class:"grow btn btn-primary",onClick:a[1]||(a[1]=_=>s(o).push(`/room/${t.order.roomId._id}`))},"查看詳情")])])):b("",!0),s(p)?(r(),c("div",le,[e("div",ne,[x(w,{onClick:a[2]||(a[2]=_=>s(h)()),icon:"fa-solid fa-xmark",class:"absolute top-0 right-0 text-4 m-[18px] cursor-pointer"}),re,e("div",ce,[e("button",{class:"btn btn-secondary w-full",onClick:a[3]||(a[3]=_=>s(h)())},"關閉視窗"),e("button",{class:"btn btn-primary w-full",onClick:a[4]||(a[4]=_=>(s(k)(t.order._id),s(h)()))},"確定取消")])])])):b("",!0)],64)}}}),ie={class:"flex flex-col"},de=["onClick"],ue={class:"flex gap-6 flex-col lg:flex-row pb-4 lg:pb-10 border-b border-neutral-40"},me=["src"],he={class:"flex flex-col gap-4 text-3h lg:text-4 grow"},fe={class:"text-4 lg:text-6 font-bold"},pe={class:"mb-2"},xe={class:"title-deco ps-4 mb-2"},ge={class:"title-deco ps-4"},_e={class:"font-bold"},be=I({__name:"OrderRoomHistory",props:["orderList"],emits:["detail-selected"],setup(t,{emit:m}){const p=m,g=n=>{p("detail-selected",n)},h=()=>{let n;window.innerWidth<=1024?n=.45*window.innerHeight:n=.55*window.innerHeight,window.scrollTo({top:n,behavior:"smooth"})};return(n,k)=>(r(),c("ul",ie,[(r(!0),c(j,null,U(t.orderList,o=>(r(),c("li",{key:`${o._id}${o.status}`},[e("div",{onClick:f=>(g(o),h()),class:B(["px-4 lg:px-10 pt-4 lg:pt-10 hover:bg-neutral-40 cursor-pointer",new Date(o.checkInDate)<=new Date?"text-neutral-60":""])},[e("div",ue,[e("img",{class:"h-[80px] w-[120px] object-cover object-center rounded-2",src:o.roomId.imageUrl,alt:""},null,8,me),e("div",he,[e("p",null,"預定參考編號："+l(o._id),1),e("h3",fe,l(o.roomId.name),1),e("div",null,[e("p",pe,"住宿天數："+l(s(u).getNightNum(o.checkInDate,o.checkOutDate))+"晚",1),e("p",null,"住宿人數："+l(o.peopleNum)+"位",1)]),e("div",null,[e("p",xe,"入住："+l(s(u).getTradDateSecondary(o.checkInDate)),1),e("p",ge,"退房："+l(s(u).getTradDateSecondary(o.checkOutDate)),1)]),e("p",_e,"NT$ "+l(s(u).toThousands(o.roomId.price*s(u).getNightNum(o.checkInDate,o.checkOutDate))),1)])])],10,de)]))),128))]))}}),ve={class:"bg-neutral"},ke={class:"container mx-auto px-4 sm:px-0 pb-10 lg:pb-20"},we={class:"flex flex-col lg:flex-row gap-10"},De={class:"basis-full lg:basis-7/12 bg-white rounded-[20px] p-4 lg:p-10 flex flex-col gap-6 lg:gap-10 h-fit duration-300"},$e={key:0},ye={key:1,class:"flex flex-col justify-center items-center pb-12"},Ie=e("h2",{class:"mb-6 lg:mb-10 text-4 lg:text-6 me-auto"},"行程詳細內容",-1),Oe=e("p",{class:"text-primary-100 lg:text-6 font-bold mb-6"},"尚未有任何訂單",-1),Te={class:"basis-full lg:basis-5/12 bg-white rounded-[20px] flex flex-col h-fit duration-300"},Se=e("h2",{class:"text-4 lg:text-5 px-4 lg:px-10 pt-4 lg:pt-10 pb-6 lg:pb-10"},"歷史訂單",-1),Ce={key:0},Ne={class:"p-4 lg:p-10"},Me={key:1,class:"flex flex-col justify-center items-center py-12"},je=e("p",{class:"text-primary-100 lg:text-6 font-bold"},"尚未有歷史記錄",-1),Fe=[je],Pe=I({__name:"UserOrders",setup(t){const m=F(),{orderList:p}=y(m),g=m.getFrontOrders,h=T(()=>{const i=p.value.filter(d=>d.status===0),v=new Date,D=i.filter(d=>new Date(d.checkInDate)>v),O=i.filter(d=>new Date(d.checkInDate)<=v),L=D.sort((d,$)=>new Date(d.checkInDate).getTime()-new Date($.checkInDate).getTime()),V=O.sort((d,$)=>new Date($.checkInDate).getTime()-new Date(d.checkInDate).getTime());return[...L,...V]}),n=S(),k=i=>{n.value=i},o=S(3),f=T(()=>h.value.slice(0,o.value)),a=()=>{o.value+=3};C(f,i=>{i&&(n.value=f.value[0])});const w=W(),{isChecked:_}=y(w);return C(_,i=>{i&&g()}),H(async()=>{await g(),f.value.length>0&&(n.value=f.value[0])}),(i,v)=>{const D=M("router-link");return r(),c("div",ve,[x(E),e("div",ke,[e("div",we,[e("div",De,[n.value?(r(),c("div",$e,[x(ae,{order:n.value},null,8,["order"])])):(r(),c("div",ye,[Ie,Oe,x(D,{to:"/room",class:"btn btn-primary"},{default:z(()=>[A("訂房去")]),_:1})]))]),e("div",Te,[Se,s(p)?(r(),c("div",Ce,[x(be,{"order-list":f.value,onDetailSelected:k},null,8,["order-list"]),e("div",Ne,[f.value.length<h.value.length?(r(),c("button",{key:0,class:"btn btn-secondary w-full",onClick:v[0]||(v[0]=O=>a())},"查看更多")):b("",!0)])])):b("",!0),s(p)?b("",!0):(r(),c("div",Me,Fe))])])])])}}});export{Pe as default};
