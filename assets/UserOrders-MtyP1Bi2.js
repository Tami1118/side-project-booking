import{d as I,s as C,B as H,b as N,c as l,e as n,f as e,t as r,j as o,x,g as p,k as v,F as j,m as B,n as L,N as R,v as U,r as S,w as z,o as A,h as y,i as $,l as G}from"./index-wIY0i8YO.js";import{_ as T}from"./RoomInfoProvide.vue_vue_type_script_setup_true_lang-8ADzT-1F.js";import{u as W}from"./modalStore-HMdcR1IR.js";import{u as M}from"./orderStore-mP__rcc5.js";import{u as q}from"./userStore-2EhaLznF.js";import"./swal-MzZ19o4Z.js";const E={key:0,class:"flex flex-col gap-6 lg:gap-10"},P={class:"text-neutral-60 mb-2 text-3h lg:text-4"},Y={key:0,class:"text-4 lg:text-6"},J={key:1,class:"text-4 lg:text-6"},K=["src","alt"],Q={class:"flex flex-col gap-6 text-3h lg:text-4 text-neutral-80 font-bold pb-6 border-b border-neutral-40"},X={class:"flex gap-4 lg:text-5"},Z={class:"pe-4 border-r border-neutral-60"},ee={class:"title-deco ps-4 mb-2"},te={class:"title-deco ps-4"},se=e("h3",{class:"title-deco text-3h lg:text-4 ps-4 mb-6"},"房內設備",-1),oe=e("h3",{class:"title-deco text-3h lg:text-4 ps-4 mb-6"},"備品提供",-1),le={class:"flex gap-3"},ne={key:1,class:"fixed top-0 left-0 bg-black/40 backdrop-blur-sm w-full h-full z-10 flex justify-center items-center"},re={class:"bg-white rounded-2 relative"},ae=e("p",{class:"px-[164px] py-[100px] text-5"}," 確定要取消此房型的預約嗎？ ",-1),ce={class:"p-3 flex gap-4 border-t border-neutral-40"},ie=I({__name:"OrderRoomDetail",props:["order"],setup(s){const h=W(),{isModalOpen:m}=C(h),g=h.openModal,d=h.closeModal,b=M().deleteFrontOrder,t=H();return(w,i)=>{const k=N("font-awesome-icon");return l(),n(j,null,[s.order?(l(),n("div",E,[e("div",null,[e("p",P,"預定參考編號："+r(s.order._id),1),new Date(s.order.checkInDate)>new Date?(l(),n("h2",Y,"即將來的行程")):(l(),n("h2",J,"已結束的行程"))]),e("img",{class:"h-[200px] w-full rounded-5 object-cover",src:s.order.roomId.imageUrl,alt:s.order.roomId.name},null,8,K),e("div",Q,[e("div",X,[e("p",Z,r(s.order.roomId.name)+"，"+r()+"晚",1),e("p",null,"住宿人數："+r(s.order.peopleNum)+" 位",1)]),e("div",null,[e("div",ee,"入住："+r(o(x).getTradDateSecondary(s.order.checkInDate))+"，15:00 可入住",1),e("div",te,"退房："+r(o(x).getTradDateSecondary(s.order.checkOutDate))+"，12:00 前退房",1)]),e("div",null,"NT$ "+r(o(x).toThousands(s.order.roomId.price)),1)]),e("div",null,[se,p(T,{info:s.order.roomId.amenityInfo},null,8,["info"])]),e("div",null,[oe,p(T,{info:s.order.roomId.facilityInfo},null,8,["info"])]),e("div",le,[new Date(s.order.checkInDate)>new Date?(l(),n("button",{key:0,class:"grow btn btn-secondary",onClick:i[0]||(i[0]=a=>o(g)())},"取消訂單")):v("",!0),e("button",{class:"grow btn btn-primary",onClick:i[1]||(i[1]=a=>o(t).push(`/room/${s.order.roomId._id}`))},"查看詳情")])])):v("",!0),o(m)?(l(),n("div",ne,[e("div",re,[p(k,{onClick:i[2]||(i[2]=a=>o(d)()),icon:"fa-solid fa-xmark",class:"absolute top-0 right-0 text-4 m-[18px] cursor-pointer"}),ae,e("div",ce,[e("button",{class:"btn btn-secondary w-full",onClick:i[3]||(i[3]=a=>o(d)())},"關閉視窗"),e("button",{class:"btn btn-primary w-full",onClick:i[4]||(i[4]=a=>(o(b)(s.order._id),o(d)()))},"確定取消")])])])):v("",!0)],64)}}}),de={class:"flex flex-col"},ue=["onClick"],he={class:"flex gap-6 flex-col lg:flex-row pb-4 lg:pb-10 border-b border-neutral-40"},xe=["src"],pe={class:"flex flex-col gap-4 text-3h lg:text-4 grow"},fe={class:"text-4 lg:text-6 font-bold"},me={class:"mb-2"},ge={class:"title-deco ps-4 mb-2"},_e={class:"title-deco ps-4"},be={class:"font-bold"},ve=I({__name:"OrderRoomHistory",props:["orderList"],emits:["detail-selected"],setup(s,{emit:h}){const m=h,g=c=>{m("detail-selected",c)},d=()=>{let c;window.innerWidth<=1024?c=.45*window.innerHeight:c=.55*window.innerHeight,window.scrollTo({top:c,behavior:"smooth"})};return(c,b)=>(l(),n("ul",de,[(l(!0),n(j,null,B(s.orderList,t=>(l(),n("li",{key:t._id},[e("div",{onClick:w=>(g(t),d()),class:L(["px-4 lg:px-10 pt-4 lg:pt-10 hover:bg-neutral-40 cursor-pointer",new Date(t.checkInDate)<=new Date?"text-neutral-60":""])},[e("div",he,[e("img",{class:"h-[80px] w-[120px] object-cover object-center rounded-2",src:t.roomId.imageUrl,alt:""},null,8,xe),e("div",pe,[e("p",null,"預定參考編號："+r(t._id),1),e("h3",fe,r(t.roomId.name),1),e("div",null,[e("p",me,"住宿天數："+r(o(x).getNightNum(t.checkInDate,t.checkOutDate))+"晚",1),e("p",null,"住宿人數："+r(t.peopleNum)+"位",1)]),e("div",null,[e("p",ge,"入住："+r(o(x).getTradDateSecondary(t.checkInDate)),1),e("p",_e,"退房："+r(o(x).getTradDateSecondary(t.checkOutDate)),1)]),e("p",be,r(o(x).toThousands(t.roomId.price*o(x).getNightNum(t.checkInDate,t.checkOutDate))),1)])])],10,ue)]))),128))]))}}),we={class:"bg-neutral"},ke=G('<div class="h-[206px] lg:h-[384px] relative"><img class="w-full h-full object-cover" src="https://images.unsplash.com/photo-1606744837616-56c9a5c6a6eb?q=80&amp;w=2835&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt=""><div class="absolute top-0 left-0 w-full h-full my-auto"><div class="container mx-auto h-full flex flex-col justify-center lg:flex-row lg:justify-start lg:items-center gap-4 lg:gap-6 px-4 sm:px-0 duration-300"><div class="w-[72px] h-[72px] lg:w-[144px] lg:h-[144px] rounded-full"></div><h1 class="text-white text-8 lg:text-12">Hello，</h1></div></div></div>',1),De={class:"container mx-auto px-4 sm:px-0 py-10 lg:py-20"},ye={class:"mb-10"},$e={class:"flex flex-col lg:flex-row gap-10"},Ie={class:"basis-full lg:basis-7/12 bg-white rounded-[20px] p-4 lg:p-10 flex flex-col gap-6 lg:gap-10 h-fit duration-300"},Oe={key:0,class:"flex flex-col justify-center items-center pb-12"},Se=e("h2",{class:"mb-6 lg:mb-10 text-4 lg:text-6 me-auto"},"行程詳細內容",-1),Te=e("p",{class:"text-primary-100 lg:text-6 font-bold mb-6"},"尚未有任何訂單",-1),Ce={key:1},Ne={class:"basis-full lg:basis-5/12 bg-white rounded-[20px] flex flex-col h-fit duration-300"},je=e("h2",{class:"text-4 lg:text-5 px-4 lg:px-10 pt-4 lg:pt-10 pb-6 lg:pb-10"},"歷史訂單",-1),Me={key:0,class:"flex flex-col justify-center items-center py-12"},Ve=e("p",{class:"text-primary-100 lg:text-6 font-bold"},"尚未有歷史記錄",-1),Fe=[Ve],He={key:1},Be={class:"p-4 lg:p-10"},qe=I({__name:"UserOrders",setup(s){const h=M(),{orderList:m}=R(h),g=h.getFrontOrders,d=U(()=>{const a=m.value.filter(u=>u.status===0),f=new Date,_=a.filter(u=>new Date(u.checkInDate)>f),O=a.filter(u=>new Date(u.checkInDate)<=f),V=_.sort((u,D)=>new Date(u.checkInDate).getTime()-new Date(D.checkInDate).getTime()),F=O.sort((u,D)=>new Date(D.checkInDate).getTime()-new Date(u.checkInDate).getTime());return[...V,...F]}),c=S(),b=a=>{c.value=a},t=S(d.value.slice(0,3)),w=()=>{const f=t.value.length+3;t.value=d.value.slice(0,f)},i=q(),{isChecked:k}=C(i);return z(k,a=>{a&&g()}),A(async()=>{await g(),d.value.length>0&&(c.value=d.value[0])}),(a,f)=>{const _=N("router-link");return l(),n("div",we,[ke,e("div",De,[e("div",ye,[p(_,{to:"/user",class:"py-4 px-6 text-white"},{default:y(()=>[$("個人資料")]),_:1}),p(_,{to:"/user-order",class:"py-4 px-6 text-white"},{default:y(()=>[$("我的訂單")]),_:1})]),e("div",$e,[e("div",Ie,[c.value?(l(),n("div",Ce,[p(ie,{order:c.value},null,8,["order"])])):(l(),n("div",Oe,[Se,Te,p(_,{to:"/room",class:"btn btn-primary"},{default:y(()=>[$("訂房去")]),_:1})]))]),e("div",Ne,[je,o(m)?(l(),n("div",He,[p(ve,{"order-list":t.value,onDetailSelected:b},null,8,["order-list"]),e("div",Be,[t.value.length<d.value.length?(l(),n("button",{key:0,class:"btn btn-secondary w-full",onClick:f[0]||(f[0]=O=>w())},"查看更多")):v("",!0)])])):(l(),n("div",Me,Fe))])])])])}}});export{qe as default};
