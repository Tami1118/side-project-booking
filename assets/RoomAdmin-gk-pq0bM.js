import{d as D,s as M,c as n,e as i,f as e,i as f,t as u,j as t,N as L,b as $,g as r,h as P,n as h,F as g,m as V,M as T,B as j,k as y,C as F,o as B,p as q}from"./index-VUWRmG3B.js";import{f as J}from"./format-ue8EY1kP.js";import{u as S}from"./roomStore-vKmbspdn.js";import{u as O}from"./userStore-yEjCii5z.js";import"./swal-Op3Jh1cP.js";const E={class:"w-full h-[30vh] lg:h-[24vh] flex justify-center items-center px-6"},z={class:"text-5 font-bold text-justify"},A={class:"text-primary-100"},G={class:"p-3 flex gap-4 border-t border-primary-60"},H=D({__name:"RoomDelete",setup(N){const m=S(),{tempRoom:_}=M(m),p=m.closeRoomDelModal,s=m.deleteRoom;return(k,d)=>(n(),i("div",{onClick:d[3]||(d[3]=L(x=>t(p)(),["stop"])),class:"fixed top-0 left-0 w-full h-full bg-black/40 backdrop-blur-sm flex justify-center items-end lg:items-center"},[e("div",{onClick:d[2]||(d[2]=L(()=>{},["stop"])),class:"bg-white rounded-t-[16px] lg:rounded-[16px] w-full lg:w-[36vw]"},[e("div",E,[e("p",z,[f(" 刪除後無法復原，確定要刪除 "),e("span",A,u(t(_).name),1),f(" 嗎？ ")])]),e("div",G,[e("button",{class:"btn btn-secondary w-full",onClick:d[0]||(d[0]=x=>t(p)())},"關閉視窗"),e("button",{class:"btn btn-primary w-full",onClick:d[1]||(d[1]=x=>(t(s)(),t(p)()))},"刪除")])])]))}}),K={class:"sticky top-0 px-5 py-4 z-10 border-b border-primary flex justify-between bg-primary-40 text-primary"},Q={class:"text-5"},W={class:"p-8"},X={class:"flex flex-col lg:flex-row gap-4 lg:gap-10"},Y={class:"w-full lg:w-7/12 flex flex-col gap-4 lg:order-1"},Z=e("label",{for:"room-name",class:"font-bold"},"房型名稱",-1),ee={class:"grid grid-cols-2 gap-4"},te=e("label",{for:"room-area",class:"font-bold"},"坪數",-1),oe=e("label",{for:"room-bed",class:"font-bold"},"床數",-1),se={class:"relative"},le=e("option",{value:"",selected:""},"請選擇床數",-1),ae=["value"],ne=e("div",{class:"absolute top-0 bottom-0 right-0 m-auto p-4 pointer-events-none"},[e("span",{class:"material-icons"},"keyboard_arrow_down")],-1),re=e("label",{for:"room-people",class:"font-bold"},"最大人數",-1),ie=e("label",{for:"room-price",class:"font-bold"},"價格",-1),de=e("label",{for:"room-name",class:"font-bold"},"描述",-1),ce=e("p",{class:"font-bold mb-2"},"房內設備",-1),ue={class:"grid grid-cols-3 border border-neutral-40 p-4 rounded-2"},me=["for"],pe=["value","id","name","onUpdate:modelValue"],fe=e("p",{class:"font-bold mb-2"},"備品提供",-1),_e={class:"grid grid-cols-3 border border-neutral-40 p-4 rounded-2"},be=["for"],ve=["value","id","name","onUpdate:modelValue"],he={class:"flex gap-2 justify-end"},xe={type:"submit",class:"btn btn-primary"},ge={class:"w-full lg:w-5/12"},ye={class:"flex flex-col gap-6"},ke={class:"pb-6 border-b border-neutral-40"},we=e("label",{for:"room-img",class:"font-bold"},"房型主圖",-1),$e=["src"],Ve=e("label",{for:"room-imgs",class:"font-bold"},"多圖設置",-1),Ue={class:"flex flex-col gap-2"},Re={class:"flex border border-neutral-40 rounded-4"},Ce=["onUpdate:modelValue"],Me=["onClick"],Le=["src","alt"],je={key:0},Se={__name:"RoomModal",setup(N){const m=S(),{showRoomModal:_,updateRoomType:p,tempRoom:s,bedType:k}=M(m),d=m.createRoom,x=m.editRoom,U=m.closeRoomModal;return(R,l)=>{const b=$("VField"),v=$("ErrorMessage"),w=$("font-awesome-icon"),I=$("VForm");return n(),i("div",{onClick:l[13]||(l[13]=L(c=>t(U)(),["stop"])),class:"fixed top-0 left-0 w-full h-full bg-neutral-100/50 backdrop-blur-sm flex justify-end"},[e("div",{onClick:l[12]||(l[12]=L(()=>{},["stop"])),"data-aos":"fade-left","data-aos-delay":"50","data-aos-duration":"300",class:"bg-white w-full lg:w-3/5 duration-300 h-full overflow-scroll"},[e("div",K,[e("h1",Q,u(t(p)==="create"?"新增":"編輯")+"房型",1),e("span",{class:"material-icons cursor-pointer",onClick:l[0]||(l[0]=c=>t(U)())},"close")]),e("div",W,[r(I,{class:"flex flex-col gap-4",onSubmit:l[11]||(l[11]=c=>(t(p)==="create"?t(d)():t(x)(),_.value=!1))},{default:P(({errors:c})=>[e("div",X,[e("div",Y,[e("div",null,[Z,r(b,{type:"text",id:"room-name",name:"房型名稱",class:h([{"is-invalid":c.房型名稱},"form-input"]),rules:"required",modelValue:t(s).name,"onUpdate:modelValue":l[1]||(l[1]=o=>t(s).name=o),placeholder:"請輸入房型名稱"},null,8,["class","modelValue"]),r(v,{name:"房型名稱",class:"text-alert-100 text-3h"})]),e("div",ee,[e("div",null,[te,r(b,{type:"number",id:"room-area",name:"坪數",class:h([{"is-invalid":c.坪數},"form-input"]),rules:"required|min_value:3|max_value:100",modelValue:t(s).areaInfo,"onUpdate:modelValue":l[2]||(l[2]=o=>t(s).areaInfo=o),placeholder:"請輸入坪數"},null,8,["class","modelValue"]),r(v,{name:"坪數",class:"text-alert-100 text-3h"})]),e("div",null,[oe,e("div",se,[r(b,{as:"select",id:"room-bed",name:"床數",class:h([{"is-invalid":c.床數},"p-4 rounded-2 form-select w-full"]),modelValue:t(s).bedInfo,"onUpdate:modelValue":l[3]||(l[3]=o=>t(s).bedInfo=o)},{default:P(()=>[le,(n(!0),i(g,null,V(t(k),o=>(n(),i("option",{key:o,value:o},u(o),9,ae))),128))]),_:2},1032,["class","modelValue"]),ne]),r(v,{name:"床數",class:"text-alert-100 text-3h"})]),e("div",null,[re,r(b,{type:"number",id:"room-people",name:"最大人數",class:h([{"is-invalid":c.最大人數},"form-input"]),rules:"required|min_value:1|max_value:20",modelValue:t(s).maxPeople,"onUpdate:modelValue":l[4]||(l[4]=o=>t(s).maxPeople=o),placeholder:"請輸入最大人數"},null,8,["class","modelValue"]),r(v,{name:"最大人數",class:"text-alert-100 text-3h"})]),e("div",null,[ie,r(b,{type:"number",id:"room-price",name:"價格",class:h([{"is-invalid":c.價格},"form-input"]),rules:"required|min_value:100|max_value:1000000",modelValue:t(s).price,"onUpdate:modelValue":l[5]||(l[5]=o=>t(s).price=o),placeholder:"請輸入價格"},null,8,["class","modelValue"]),r(v,{name:"價格",class:"text-alert-100"})])]),e("div",null,[de,r(b,{as:"textarea",id:"room-name",name:"描述",class:h([{"is-invalid":c.描述},"form-input"]),rules:"required",modelValue:t(s).description,"onUpdate:modelValue":l[6]||(l[6]=o=>t(s).description=o),placeholder:"請輸入描述"},null,8,["class","modelValue"]),r(v,{class:"text-alert-100",name:"描述"})]),e("div",null,[ce,e("div",ue,[(n(!0),i(g,null,V(t(s).facilityInfo,o=>(n(),i("div",{key:o.title,class:"flex items-center"},[e("label",{for:o.title,class:"flex items-center"},[j(e("input",{type:"checkbox",class:"",value:o.title,id:o.title,name:o.title,"onUpdate:modelValue":a=>o.isProvide=a},null,8,pe),[[T,o.isProvide]]),e("span",null,[r(w,{icon:"fa-solid fa-check",class:h(o.isProvide?"text-white text-3":"hidden")},null,8,["class"])]),f(" "+u(o.title),1)],8,me)]))),128))])]),e("div",null,[fe,e("div",_e,[(n(!0),i(g,null,V(t(s).amenityInfo,o=>(n(),i("div",{key:o.title,class:"flex items-center"},[e("label",{for:o.title,class:"flex items-center"},[j(e("input",{type:"checkbox",class:"",value:o.title,id:o.title,name:o.title,"onUpdate:modelValue":a=>o.isProvide=a},null,8,ve),[[T,o.isProvide]]),e("span",null,[r(w,{icon:"fa-solid fa-check",class:h(o.isProvide?"text-white text-3":"hidden")},null,8,["class"])]),f(" "+u(o.title),1)],8,be)]))),128))])]),e("div",he,[e("button",{type:"button",class:"btn btn-secondary",onClick:l[7]||(l[7]=o=>(_.value=!1,R.resetTempRoom()))},"取消"),e("button",xe,"確認"+u(t(p)==="create"?"新增":"更新"),1)])]),e("div",ge,[e("div",ye,[e("div",ke,[we,r(b,{type:"text",id:"room-img",name:"房型圖片",class:h([{"is-invalid":c.房型圖片},"form-input"]),rules:"required",modelValue:t(s).imageUrl,"onUpdate:modelValue":l[8]||(l[8]=o=>t(s).imageUrl=o),placeholder:"請輸入房型圖片連結"},null,8,["class","modelValue"]),r(v,{name:"房型圖片",class:"text-alert-100 text-3h"}),t(s).imageUrl?(n(),i("img",{key:0,src:t(s).imageUrl,class:"mt-2 rounded-2 h-[200px] w-full object-cover",alt:""},null,8,$e)):y("",!0)]),e("div",null,[Ve,e("div",Ue,[t(s).imageUrlList.length?(n(),i(g,{key:0},[(n(!0),i(g,null,V(t(s).imageUrlList,(o,a)=>(n(),i("div",{key:`${t(s).name} + ${a}`},[e("div",Re,[j(e("input",{type:"text",class:"p-4 grow rounded-l-4","onUpdate:modelValue":C=>t(s).imageUrlList[a]=C,placeholder:"請輸入房型圖片連結"},null,8,Ce),[[F,t(s).imageUrlList[a]]]),e("button",{class:"p-4 rounded-r-4 hover:bg-primary-40 hover:text-primary",onClick:C=>t(s).imageUrlList.splice(a,1)},[r(w,{icon:"fa-solid fa-xmark"})],8,Me)]),t(s).imageUrlList[a]?(n(),i("img",{key:0,class:"mt-2 rounded-2 h-[200px] w-full object-cover",src:t(s).imageUrlList[a],alt:`${t(s).name} + ${a}`},null,8,Le)):y("",!0)]))),128)),t(s).imageUrlList[t(s).imageUrlList.length-1]?(n(),i("div",je,[e("button",{onClick:l[9]||(l[9]=o=>t(s).imageUrlList.push("")),class:"btn btn-primary w-full"},"新增圖片")])):y("",!0)],64)):(n(),i("button",{key:1,class:"btn btn-primary",onClick:l[10]||(l[10]=o=>t(s).imageUrlList.push(""))},"新增圖片"))])])])])])]),_:1})])])])}}},Ne={class:"p-10 flex flex-col gap-6"},Ie={class:"flex items-end"},Pe=e("h1",{class:"text-7"},"房型管理",-1),Te={key:0,class:"font-bold ms-2"},qe={class:"text-primary-100"},De={key:0,class:"text-primary-100 text-7 font-bold w-full h-[70vh] flex justify-center items-center"},Fe={key:1,class:"w-full"},Be=e("thead",null,[e("tr",{class:"border-y border-primary-60"},[e("th",{class:"p-2"}),e("th",{class:"p-2 text-start"},"房型名稱"),e("th",{class:"p-2"},"床數"),e("th",{class:"p-2"},"坪數"),e("th",{class:"p-2"},"容納人數"),e("th",{class:"p-2 text-end"},"價格"),e("th",{class:"p-2 text-center"},"管理")])],-1),Je={class:"p-2"},Oe=["src","alt"],Ee={class:"p-2 text-4h font-bold"},ze={class:"p-2 text-4h text-center"},Ae={class:"p-2 text-4h text-center"},Ge={class:"p-2 text-4h text-center"},He={class:"p-2 text-4h text-end"},Ke={class:"p-2"},Qe={class:"flex flex-wrap justify-center gap-2"},We=["onClick"],Xe=["onClick"],st=D({__name:"RoomAdmin",setup(N){const m=S(),{roomList:_,tempRoom:p,updateRoomType:s,editRoomId:k,showRoomModal:d,showDelModal:x}=M(m),U=m.getRooms,R=O(),{isChecked:l}=M(R),b=R.checkUser,v=()=>{l.value&&U()},w=async()=>{await b(),v()};return B(()=>{w()}),(I,c)=>{const o=$("font-awesome-icon");return n(),i(g,null,[e("div",Ne,[e("div",Ie,[Pe,t(_)?(n(),i("p",Te,[f("(共 "),e("span",qe,u(t(_).length),1),f(" 筆資料)")])):y("",!0)]),e("button",{class:"btn btn-primary ms-auto",onClick:c[0]||(c[0]=a=>(d.value=!0,s.value="create"))},[r(o,{icon:"fa-solid fa-plus",class:"me-2"}),f(" 新增房型 ")]),t(_)?(n(),i("table",Fe,[Be,e("tbody",null,[(n(!0),i(g,null,V(t(_),a=>(n(),i("tr",{key:a._id,class:"border-b border-primary-60 hover:bg-primary-40"},[e("td",Je,[a.imageUrl?(n(),i("img",{key:0,class:"w-full h-[120px] object-cover rounded-2",src:a.imageUrl,alt:a.name},null,8,Oe)):y("",!0)]),e("td",Ee,u(a.name),1),e("td",ze,u(a.bedInfo),1),e("td",Ae,u(a.areaInfo)+" 坪",1),e("td",Ge,u(a.maxPeople)+" 人",1),e("td",He,"NT$ "+u(t(J).toThousands(a.price)),1),e("td",Ke,[e("div",Qe,[e("button",{onClick:C=>(d.value=!0,p.value=JSON.parse(JSON.stringify(a)),s.value="edit",k.value=a._id),class:"btn btn-primary text-4h"},[r(o,{icon:"fa-solid fa-pencil",class:"me-2"}),f(" 編輯 ")],8,We),e("button",{onClick:C=>(x.value=!0,p.value=JSON.parse(JSON.stringify(a)),k.value=a._id),class:"btn text-primary-100 text-4h hover:text-primary border border-primary-100 hover:border-primary bg-transparent hover:bg-primary-60"},[r(o,{icon:"fa-solid fa-trash-can",class:"me-2"}),f(" 刪除 ")],8,Xe)])])]))),128))])])):(n(),i("div",De,[r(o,{icon:"fa-solid fa-bed",class:"me-2"}),f(" 目前還沒有任何房型，快去新增吧！ ")]))]),t(d)?(n(),q(Se,{key:0})):y("",!0),t(x)?(n(),q(H,{key:1})):y("",!0)],64)}}});export{st as default};
