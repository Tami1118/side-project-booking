import{d as I,s as y,B,b as M,c as l,e as n,f as e,t as r,i as s,g as x,k,F as j,q as u,m as R,n as U,x as S,r as T,w as C,o as H,h as z,j as q}from"./index-IWXpTEn3.js";import{_ as E}from"./UserBanner.vue_vue_type_script_setup_true_lang-xa-3Hdh8.js";import{_ as N}from"./RoomInfoProvide.vue_vue_type_script_setup_true_lang-zAAgbx2a.js";import{u as P}from"./modalStore-_yFAv90e.js";import{u as F}from"./orderStore-Opbb9po7.js";import{u as W}from"./userStore-2CLhXFjz.js";import"./swal-MzZ19o4Z.js";const A={key:0,class:"flex flex-col gap-6 lg:gap-10"},G={class:"text-neutral-60 mb-2 text-3h lg:text-4"},J={key:0,class:"text-4 lg:text-6"},K={key:1,class:"text-4 lg:text-6"},Q=["src","alt"],X={class:"flex flex-col gap-6 text-3h lg:text-4 text-neutral-80 font-bold pb-6 border-b border-neutral-40"},Y={class:"flex gap-4 lg:text-5"},Z={class:"pe-4 border-r border-neutral-60"},ee={class:"title-deco ps-4 mb-2"},te={class:"title-deco ps-4"},oe=e("h3",{class:"title-deco text-3h lg:text-4 ps-4 mb-6"},"房內設備",-1),se=e("h3",{class:"title-deco text-3h lg:text-4 ps-4 mb-6"},"備品提供",-1),le={class:"flex gap-3"},ne={key:1,class:"fixed top-0 left-0 bg-black/40 backdrop-blur-sm w-full h-full z-10 flex justify-center items-center"},re={class:"bg-white rounded-2 relative"},ce=e("p",{class:"px-[164px] py-[100px] text-5"}," 確定要取消此房型的預約嗎？ ",-1),ae={class:"p-3 flex gap-4 border-t border-neutral-40"},ie=I({__name:"OrderRoomDetail",props:["order"],setup(t){const m=P(),{isModalOpen:g}=y(m),p=m.openModal,h=m.closeModal,v=F().deleteFrontOrder,o=B();return(f,a)=>{const w=M("font-awesome-icon");return l(),n(j,null,[t.order?(l(),n("div",A,[e("div",null,[e("p",G,"預定參考編號："+r(t.order._id),1),new Date(t.order.checkInDate)>new Date?(l(),n("h2",J,"即將來的行程")):(l(),n("h2",K,"已結束的行程"))]),e("img",{class:"h-[200px] w-full rounded-5 object-cover",src:t.order.roomId.imageUrl,alt:t.order.roomId.name},null,8,Q),e("div",X,[e("div",Y,[e("p",Z,r(t.order.roomId.name)+"，"+r(s(u).getNightNum(t.order.checkInDate,t.order.checkOutDate))+" 晚",1),e("p",null,"住宿人數："+r(t.order.peopleNum)+" 位",1)]),e("div",null,[e("div",ee,"入住："+r(s(u).getTradDateSecondary(t.order.checkInDate))+"，15:00 可入住",1),e("div",te,"退房："+r(s(u).getTradDateSecondary(t.order.checkOutDate))+"，12:00 前退房",1)]),e("div",null,"NT$ "+r(s(u).toThousands(t.order.roomId.price)),1)]),e("div",null,[oe,x(N,{info:t.order.roomId.amenityInfo},null,8,["info"])]),e("div",null,[se,x(N,{info:t.order.roomId.facilityInfo},null,8,["info"])]),e("div",le,[new Date(t.order.checkInDate)>new Date?(l(),n("button",{key:0,class:"grow btn btn-secondary",onClick:a[0]||(a[0]=_=>s(p)())},"取消訂單")):k("",!0),e("button",{class:"grow btn btn-primary",onClick:a[1]||(a[1]=_=>s(o).push(`/room/${t.order.roomId._id}`))},"查看詳情")])])):k("",!0),s(g)?(l(),n("div",ne,[e("div",re,[x(w,{onClick:a[2]||(a[2]=_=>s(h)()),icon:"fa-solid fa-xmark",class:"absolute top-0 right-0 text-4 m-[18px] cursor-pointer"}),ce,e("div",ae,[e("button",{class:"btn btn-secondary w-full",onClick:a[3]||(a[3]=_=>s(h)())},"關閉視窗"),e("button",{class:"btn btn-primary w-full",onClick:a[4]||(a[4]=_=>(s(v)(t.order._id),s(h)()))},"確定取消")])])])):k("",!0)],64)}}}),de={class:"flex flex-col"},ue=["onClick"],me={class:"flex gap-6 flex-col lg:flex-row pb-4 lg:pb-10 border-b border-neutral-40"},he=["src"],fe={class:"flex flex-col gap-4 text-3h lg:text-4 grow"},xe={class:"text-4 lg:text-6 font-bold"},ge={class:"mb-2"},pe={class:"title-deco ps-4 mb-2"},_e={class:"title-deco ps-4"},be={class:"font-bold"},ve=I({__name:"OrderRoomHistory",props:["orderList"],emits:["detail-selected"],setup(t,{emit:m}){const g=m,p=c=>{g("detail-selected",c)},h=()=>{let c;window.innerWidth<=1024?c=.45*window.innerHeight:c=.55*window.innerHeight,window.scrollTo({top:c,behavior:"smooth"})};return(c,v)=>(l(),n("ul",de,[(l(!0),n(j,null,R(t.orderList,o=>(l(),n("li",{key:`${o._id}${o.status}`},[e("div",{onClick:f=>(p(o),h()),class:U(["px-4 lg:px-10 pt-4 lg:pt-10 hover:bg-neutral-40 cursor-pointer",new Date(o.checkInDate)<=new Date?"text-neutral-60":""])},[e("div",me,[e("img",{class:"h-[80px] w-[120px] object-cover object-center rounded-2",src:o.roomId.imageUrl,alt:""},null,8,he),e("div",fe,[e("p",null,"預定參考編號："+r(o._id),1),e("h3",xe,r(o.roomId.name),1),e("div",null,[e("p",ge,"住宿天數："+r(s(u).getNightNum(o.checkInDate,o.checkOutDate))+"晚",1),e("p",null,"住宿人數："+r(o.peopleNum)+"位",1)]),e("div",null,[e("p",pe,"入住："+r(s(u).getTradDateSecondary(o.checkInDate)),1),e("p",_e,"退房："+r(s(u).getTradDateSecondary(o.checkOutDate)),1)]),e("p",be,r(s(u).toThousands(o.roomId.price*s(u).getNightNum(o.checkInDate,o.checkOutDate))),1)])])],10,ue)]))),128))]))}}),ke={class:"bg-neutral"},we={class:"container mx-auto px-4 sm:px-0 pb-10 lg:pb-20"},De={class:"flex flex-col lg:flex-row gap-10"},$e={class:"basis-full lg:basis-7/12 bg-white rounded-[20px] p-4 lg:p-10 flex flex-col gap-6 lg:gap-10 h-fit duration-300"},ye={key:0,class:"flex flex-col justify-center items-center pb-12"},Ie=e("h2",{class:"mb-6 lg:mb-10 text-4 lg:text-6 me-auto"},"行程詳細內容",-1),Oe=e("p",{class:"text-primary-100 lg:text-6 font-bold mb-6"},"尚未有任何訂單",-1),Se={key:1},Te={class:"basis-full lg:basis-5/12 bg-white rounded-[20px] flex flex-col h-fit duration-300"},Ce=e("h2",{class:"text-4 lg:text-5 px-4 lg:px-10 pt-4 lg:pt-10 pb-6 lg:pb-10"},"歷史訂單",-1),Ne={key:0,class:"flex flex-col justify-center items-center py-12"},Me=e("p",{class:"text-primary-100 lg:text-6 font-bold"},"尚未有歷史記錄",-1),je=[Me],Fe={key:1},Le={class:"p-4 lg:p-10"},Pe=I({__name:"UserOrders",setup(t){const m=F(),{orderList:g}=y(m),p=m.getFrontOrders,h=S(()=>{const i=g.value.filter(d=>d.status===0),b=new Date,D=i.filter(d=>new Date(d.checkInDate)>b),O=i.filter(d=>new Date(d.checkInDate)<=b),L=D.sort((d,$)=>new Date(d.checkInDate).getTime()-new Date($.checkInDate).getTime()),V=O.sort((d,$)=>new Date($.checkInDate).getTime()-new Date(d.checkInDate).getTime());return[...L,...V]}),c=T(),v=i=>{c.value=i},o=T(3),f=S(()=>h.value.slice(0,o.value)),a=()=>{o.value+=3};C(f,i=>{i&&(c.value=f.value[0])});const w=W(),{isChecked:_}=y(w);return C(_,i=>{i&&p()}),H(async()=>{await p(),f.value.length>0&&(c.value=f.value[0])}),(i,b)=>{const D=M("router-link");return l(),n("div",ke,[x(E),e("div",we,[e("div",De,[e("div",$e,[c.value?(l(),n("div",Se,[x(ie,{order:c.value},null,8,["order"])])):(l(),n("div",ye,[Ie,Oe,x(D,{to:"/room",class:"btn btn-primary"},{default:z(()=>[q("訂房去")]),_:1})]))]),e("div",Te,[Ce,s(g)?(l(),n("div",Fe,[x(ve,{"order-list":f.value,onDetailSelected:v},null,8,["order-list"]),e("div",Le,[f.value.length<h.value.length?(l(),n("button",{key:0,class:"btn btn-secondary w-full",onClick:b[0]||(b[0]=O=>a())},"查看更多")):k("",!0)])])):(l(),n("div",Ne,je))])])])])}}});export{Pe as default};
