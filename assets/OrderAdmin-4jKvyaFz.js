import{d as $,s as g,b as v,c as n,e as i,f as t,j as e,g as b,h as N,n as I,k as _,N as y,i as m,t as d,o as j,F as S,m as L,p as V}from"./index-_3h-oLcu.js";import{f as O}from"./format-ue8EY1kP.js";import{u as C}from"./orderStore-T-HmRF4q.js";import{u as B}from"./userStore-Gs78NrJG.js";import"./swal-szYjbNcO.js";const E={class:"sticky top-0 px-5 py-4 z-10 border-b border-primary flex justify-between bg-primary-40 text-primary"},J=t("h1",{class:"text-5"},"訂單詳細內容",-1),U={key:0,class:"p-8"},A={class:"flex flex-col lg:flex-row gap-4 lg:gap-10"},z={class:"w-full lg:w-7/12 flex flex-col gap-4 lg:order-1"},T=t("label",{for:"room-name",class:"font-bold"},"房型名稱",-1),q={class:"flex gap-2 justify-end"},R=t("button",{type:"submit",class:"btn btn-primary"},"確認更新",-1),G=t("div",{class:"w-full lg:w-5/12"},[t("div",{class:"flex flex-col gap-6"})],-1),H=$({__name:"OrderModal",setup(D){const r=C(),{showOrderModal:c,tempOrder:a}=g(r),f=r.editOrder,u=r.closeOrderModal;return(l,s)=>{const x=v("VField"),k=v("ErrorMessage"),w=v("VForm");return n(),i("div",{class:"fixed top-0 left-0 w-full h-full bg-neutral-100/50 backdrop-blur-sm flex justify-end",onClick:s[5]||(s[5]=y(p=>e(u)(),["stop"]))},[t("div",{onClick:s[4]||(s[4]=y(()=>{},["stop"])),"data-aos":"fade-left","data-aos-delay":"50","data-aos-duration":"300",class:"bg-white w-full lg:w-1/2 duration-300 h-full overflow-scroll"},[t("div",E,[J,t("span",{class:"material-icons cursor-pointer",onClick:s[0]||(s[0]=p=>e(u)())},"close")]),e(a)?(n(),i("div",U,[b(w,{class:"flex flex-col gap-4",onSubmit:s[3]||(s[3]=p=>(e(f)(),c.value=!1))},{default:N(({errors:p})=>[t("div",A,[t("div",z,[t("div",null,[T,b(x,{type:"text",id:"room-name",name:"房型名稱",class:I([{"is-invalid":p.房型名稱},"form-input"]),rules:"required",modelValue:e(a).checkInDate,"onUpdate:modelValue":s[1]||(s[1]=h=>e(a).checkInDate=h),placeholder:"請輸入房型名稱"},null,8,["class","modelValue"]),b(k,{name:"房型名稱",class:"text-alert-100 text-3h"})]),t("div",q,[t("button",{type:"button",class:"btn btn-secondary",onClick:s[2]||(s[2]=h=>e(u)())},"取消"),R])]),G])]),_:1})])):_("",!0)])])}}}),K={class:"w-full h-[30vh] lg:h-[24vh] flex justify-center items-center px-6"},P={class:"text-5 font-bold text-center"},Q={class:"text-primary-100"},W={class:"p-3 flex gap-4 border-t border-primary-60"},X=$({__name:"OrderDelete",setup(D){const r=C(),{editOrderId:c}=g(r),a=r.closeOrderDelModal,f=r.deleteOrder;return(u,l)=>(n(),i("div",{onClick:l[3]||(l[3]=y(s=>e(a)(),["stop"])),class:"fixed top-0 left-0 w-full h-full bg-black/40 backdrop-blur-sm flex justify-center items-end lg:items-center"},[t("div",{onClick:l[2]||(l[2]=y(()=>{},["stop"])),class:"bg-white rounded-t-[16px] lg:rounded-[16px] w-full lg:w-[36vw]"},[t("div",K,[t("p",P,[m(" 刪除後無法復原，確定要刪除訂單編號 "),t("span",Q,d(e(c)),1),m(" 嗎？ ")])]),t("div",W,[t("button",{class:"btn btn-secondary w-full",onClick:l[0]||(l[0]=s=>e(a)())},"關閉視窗"),t("button",{class:"btn btn-primary w-full",onClick:l[1]||(l[1]=s=>(e(f)(),e(a)()))},"刪除")])])]))}}),Y={class:"p-10 flex flex-col gap-6"},Z={class:"flex items-end"},tt=t("h1",{class:"text-7"},"訂單管理",-1),et={key:0,class:"font-bold ms-2"},st={class:"text-primary-100"},ot={key:0,class:"w-full admin-table"},lt=t("thead",null,[t("tr",{class:"border-y border-primary-60"},[t("th",{class:"text-start"},"新增時間"),t("th",{class:"text-start"},"客戶姓名"),t("th",{class:"text-start"},"Email"),t("th",{class:"text-start"},"預約房型"),t("th",{class:"text-start"},"入住時間"),t("th",{class:"text-start"},"退房時間"),t("th",{class:"text-start"},"狀態"),t("th",{class:"text-start"})])],-1),rt={class:"flex flex-wrap justify-center gap-2"},at=["onClick"],nt=["onClick","disabled"],_t=$({__name:"OrderAdmin",setup(D){const r=C(),{orderList:c,tempOrder:a,editOrderId:f,showOrderModal:u,showDelModal:l}=g(r),s=r.getOrders,x=B(),{isChecked:k}=g(x),w=x.checkUser,p=()=>{k.value&&s()},h=async()=>{await w(),p()};return j(()=>{h()}),(dt,ct)=>{const M=v("font-awesome-icon");return n(),i(S,null,[t("div",Y,[t("div",Z,[tt,e(c)?(n(),i("p",et,[m("(共 "),t("span",st,d(e(c).length),1),m(" 筆資料)")])):_("",!0)]),e(c)?(n(),i("table",ot,[lt,t("tbody",null,[(n(!0),i(S,null,L(e(c),o=>(n(),i("tr",{key:o._id,class:"border-b border-primary-60 hover:bg-primary-40"},[t("td",null,d(e(O).getLocalDateFormat(new Date(o.createdAt))),1),t("td",null,d(o.userInfo.name),1),t("td",null,d(o.userInfo.email),1),t("td",null,d(o.roomId.name),1),t("td",null,d(e(O).getLocalDateFormat(new Date(o.checkInDate))),1),t("td",null,d(e(O).getLocalDateFormat(new Date(o.checkOutDate))),1),t("td",null,d(o.status===0?"":"取消"),1),t("td",null,[t("div",rt,[t("button",{onClick:F=>(u.value=!0,a.value=JSON.parse(JSON.stringify(o)),f.value=o._id),class:"btn btn-primary text-4h"},[b(M,{icon:"fa-solid fa-list-ul",class:"me-2"}),m(" 詳細內容 ")],8,at),t("button",{onClick:F=>(l.value=!0,a.value=JSON.parse(JSON.stringify(o)),f.value=o._id),class:"btn btn-secondary",disabled:o.status===0},[b(M,{icon:"fa-solid fa-trash-can",class:"me-2"}),m(" 刪除 ")],8,nt)])])]))),128))])])):_("",!0)]),e(u)?(n(),V(H,{key:0})):_("",!0),e(l)?(n(),V(X,{key:1})):_("",!0)],64)}}});export{_t as default};
